<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com -->
<!--  Last Published: Thu Aug 10 2017 15:58:54 GMT+0000 (UTC)  -->
<html data-wf-page="5905ee8fe6ee626e6c7169fc" data-wf-site="58ee511d22e1092ac39cacf7">
<head>
  <meta charset="utf-8">
  <title>Teacher Backup</title>
  <meta content="Teacher Backup" property="og:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/anderss-stunning-project.webflow.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({
  google: {
    families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic","Roboto:100,100italic,300,300italic,regular,italic,500,500italic,700,700italic,900,900italic","Source Sans Pro:200,200italic,300,300italic,regular,italic,600,600italic,700,700italic,900,900italic"]
  }
});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);
</script>
  <link href="https://daks2k3a4ib2z.cloudfront.net/img/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="https://daks2k3a4ib2z.cloudfront.net/img/webclip.png" rel="apple-touch-icon">
</head>
<body>
  <div class="_100vw">
    <div class="wrapper">
      <div class="wrapper__header">
        <div class="header-tesla">
          <div class="logo-tesla__box">
            <div class="text-block-13">RESURS</div>
          </div>
          <div class="menu-left-tesla">
            <div class="menu-left-tesla__item">KURSER</div>
            <div class="menu-left-tesla__item">LÄRARE</div>
            <div class="menu-left-tesla__item">SALAR</div>
            <div class="menu-left-tesla__item">PERIODER</div>
          </div>
          <div class="menu-right-tesla">
            <div class="menu-right-tesla__item">MITT SCHEMA</div>
            <div class="menu-right-tesla__item">MINA KURSER</div>
            <div class="menu-right-tesla__item">LOG OUT</div>
          </div>
        </div>
      </div>
      <div class="pagetitle-tesla__wrapper">
        <div class="margin__210--left"></div>
        <div class="pagetitle-tesla__box">
          <div class="titlebox-tesla">
            <div class="h-tesla-30-400-000000" id="courseNameHeadline">Förnamn Efternamn</div>
          </div>
        </div>
        <div class="margin__210--right"></div>
      </div>
      <div class="table-tesla">
        <div class="margin__210--left"></div>
        <div class="table-tesla__container">
          <div class="schedule-tesla__right">
            <div class="table-tesla__searchblock">
              <div class="form-wrapper w-form">
                <form data-name="Email Form" id="email-form" name="email-form"><label class="field-label" for="resurs">RESURS</label><select class="select-field w-select" data-name="resurs" id="resurs" name="resurs"><option value="">Lärare</option>
<option value="First">Kurser</option>
<option value="Second">Salar</option>
<option value="Third">VT15</option></select></form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>
            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">NAMN</label>
                  <div id="teacherscheckboxes" class="table-tesla__checkbox__fieldbox">


                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="teachers radio all" id="teachers-radio-all" name="teachers-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Alla</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="teachers radio all" id="teachers-radio-none" name="teachers-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Ingen</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>
                    <!--
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input checked="checked" class="w-checkbox-input" data-name="Checkbox E 2" id="checkbox-E-2" name="checkbox-E-2" type="checkbox"><label class="field-label-8 w-form-label" for="checkbox-E-2">Övning</label></div>
                      <div class="text-block-16" id="countE">233</div>
                    </div>
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input checked="checked" class="w-checkbox-input" data-name="Checkbox S 2" id="checkbox-S-2" name="checkbox-S-2" type="checkbox"><label class="field-label-8 w-form-label" for="checkbox-S-2">Seminarium</label></div>
                      <div class="text-block-16" id="countS">42</div>
                    </div>
                  -->
                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>


            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">TYP</label>
                  <div class="table-tesla__checkbox__fieldbox" id="classtypesBox">
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="classtypes radio all" id="classtypes-radio-all" name="classtypes-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Alla</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="classtypes radio all" id="classtypes-radio-none" name="classtypes-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Ingen</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>




                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>



            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">TYP</label>
                  <div class="table-tesla__checkbox__fieldbox" id="roomsBox">
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="rooms radio all" id="rooms-radio-all" name="rooms-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Alla</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="rooms radio all" id="rooms-radio-none" name="rooms-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Ingen</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>




                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>
      <!--
            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">KURS</label>
                  <div class="table-tesla__checkbox__fieldbox" id="courseBox">



                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input checked="checked" class="checkbox-2 w-checkbox-input" data-name="checkbox-AI1128" id="checkbox-AI1128" name="checkbox-AI1128" type="checkbox"><label class="field-label-8 w-form-label" for="checkbox-AI1128">AI1128</label></div>
                      <div class="text-block-16" id="countAI1128"></div>
                    </div>
                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>

          -->
            <div class="table-tesla__searchblock">
              <div class="form-wrapper w-form">
                <form data-name="Email Form" id="email-form" name="email-form"><label class="field-label" for="Field-2">KROCKTEST</label><select class="select-field w-select" data-name="Field" id="Field-2" name="Field"><option value="">Lärare</option>
<option value="First">VT17</option>
<option value="Second">VT16</option>
<option value="Third">VT15</option></select><select class="select-field w-select" data-name="Field" id="krocktestkurs" name="Field"><option value="Kurs">Kurs</option>
<option value="AI1128">AI1128</option>
<option value="AI1148">AI1147</option>
<option value="AI1148">AI1148</option></select></form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>
          </div>
          <div class="schedule-tesla__left" id="schedule">
            <div class="table-tesla__table__headerbox">
              <div class="table-tesla__header__lablebox-period">
                <div class="table-tesla__header__cell__text">DATUM</div>
              </div>
              <div class="table-tesla__header__lablebox-period">
                <div class="table-tesla__header__cell__text">TID</div>
              </div>
              <div class="table-tesla__header__lablebox-period">
                <div class="table-tesla__header__cell__text">TYP</div>
              </div>
              <div class="table-tesla__header__lablebox--course">
                <div class="table-tesla__header__cell__text">INNEHÅLL</div>
              </div>
              <div class="table-tesla__table__header__lablebox-programandyear">
                <div class="table-tesla__header__cell__text">SAL</div>
              </div>
              <div class="table-tesla__table__header__lablebox-programandyear">
                <div class="table-tesla__header__cell__text">LÄRARE</div>
              </div>
            </div>
<!--
            <div class="table-tesla__table__rowbox">
              <div class="table-tesla__table__row">
                <div class="table-tesla__cell__text">170228</div>
                <div class="table-tesla__cell__text">10-12</div>
                <div class="table-tesla__cell__text">E</div>
                <div class="table-tesla__cell__text--bold">Mikroekonomi</div>
                <div class="table-tesla__cell__text">F2</div>
                <div class="table-tesla__cell__text">AI1108</div>
              </div>
            </div>
          -->
          </div>
          <div class="schedule-tesla__right">
            <div class="table-tesla__searchblock">
              <div class="form-wrapper w-form">
                <form data-name="Email Form" id="email-form" name="email-form"><label class="field-label" for="Field-2">ÅR</label><select class="select-field w-select" data-name="Field" id="Field-2" name="Field"><option value="">2017</option>
<option value="First">VT17</option>
<option value="Second">VT16</option>
<option value="Third">VT15</option></select></form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>

            <div class="table-tesla__checkboxblock" id="availableteachersbox">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">NAMN</label>
                  <div id="availableteacherscheckboxes" class="table-tesla__checkbox__fieldbox">

<!--
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="availableteachers radio all" id="availableteachers-radio-all" name="availableteachers-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Alla</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="availableteachers radio all" id="availableteachers-radio-none" name="availableteachers-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Ingen</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>

                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input checked="checked" class="w-checkbox-input" data-name="Checkbox E 2" id="checkbox-E-2" name="checkbox-E-2" type="checkbox"><label class="field-label-8 w-form-label" for="checkbox-E-2">Övning</label></div>
                      <div class="text-block-16" id="countE">233</div>
                    </div>
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input checked="checked" class="w-checkbox-input" data-name="Checkbox S 2" id="checkbox-S-2" name="checkbox-S-2" type="checkbox"><label class="field-label-8 w-form-label" for="checkbox-S-2">Seminarium</label></div>
                      <div class="text-block-16" id="countS">42</div>
                    </div>
                  -->
                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>



            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">KURS</label>
                  <div class="table-tesla__checkbox__fieldbox" id="coursesBox2">
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="courses radio all" id="courses-radio-all" name="courses-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Alla</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="courses radio all" id="courses-radio-none" name="courses-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Ingen</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>
                    <!--
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input checked="checked" class="checkbox-2 w-checkbox-input" data-name="checkbox-AI1128" id="checkbox-AI1128" name="checkbox-AI1128" type="checkbox"><label class="field-label-8 w-form-label" for="checkbox-AI1128">AI1128</label></div>
                      <div class="text-block-16" id="countAI1128">108</div>
                    </div>
                  -->
                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>
            <div class="table-tesla__searchblock">
              <div class="form-wrapper w-form">
                <form data-name="Email Form" id="email-form" name="email-form"><label class="field-label" for="Field-2">KROCKTEST</label><select class="select-field w-select" data-name="Field" id="Field-2" name="Field"><option value="">Lärare</option>
<option value="First">VT17</option>
<option value="Second">VT16</option>
<option value="Third">VT15</option></select><select class="select-field w-select" data-name="Field" id="krocktestkurs" name="Field"><option value="Kurs">Kurs</option>
<option value="AI1128">AI1128</option>
<option value="AI1148">AI1147</option>
<option value="AI1148">AI1148</option></select></form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="margin__210--right"></div>
      </div>
    </div>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" type="text/javascript"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
  <script>
 /* var courses =
      [
        {
          name:"AI1128",
          id:{
            checkbox:"checkbox-AI1128",
            counter:"countAI1128"
          },
          types:{
            F:4,
            E:2,
            S:0
          },
          status:1
        },
        {
          name:"AI1147",
          id:{
            checkbox:"checkbox-AI1147",
            counter:"countAI1147"
          },
          types:{
            F:18,
            E:0,
            S:0
          },
          status:1
        },
        {
          name:"AI1148",
          id:{
            checkbox:"checkbox-AI1148",
            counter:"countAI1148"
          },
          types:{
            F:2,
            E:4,
            S:0
          },
          status:1
        },
        {
          name:"AI1108",
          id:{
            checkbox:"checkbox-AI1108",
            counter:"countAI1108"
          },
          types:{
            F:4,
            E:4,
            S:4
          },
          status:1
        }
      ]
      */

      function addAvailableTeachers(code) {
        var div;
        var i;
        var periods;
        var program;
        var year;

        for (i = 0; i < code.length; i++) {

          //console.log(i);

    // Create row element
          div = document.createElement('div');
          div.className = "checkboxblock__entry";

    // Populate row element
          div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input availableteachers-checkboxes" data-availableteachers="' + code[i]['id'] + '" id="availableteachers-checkbox-' + i + '" name="availableteachers-checkbox-' + i + '" type="checkbox">\
          <label class="field-label-8 w-form-label" for="availableteachers-checkbox-' + i + '">' + code[i]['firstname'] + ' ' + code[i]['lastname'] + '</label></div>\
            <div class="text-block-16" id="countE"></div>';

    // Append row element
          document.getElementById('availableteacherscheckboxes').appendChild(div);
        }

  // Create row element
        div = document.createElement('div');
        div.className = "checkboxblock__entry";

  // Populate row element
        div.innerHTML = '<input style="border-radius:3px; background-color:#3B99FC; margin-top:3px; padding:5px; color:white" class="signin-tesla__form__button--submit w-button field-label" data-wait="Please wait..." id="availableteachers-submit" type="button" value="SUBMIT">\
          <div class="text-block-16" id="countE"></div>';



        document.getElementById('availableteacherscheckboxes').appendChild(div);


        var submitbutton = document.getElementById("availableteachers-submit");

        submitbutton.addEventListener("click", function(event) {


          var myarray = document.querySelector('[data-editteachersclasses="true"]').getAttribute("data-teachersclasses").split(", ");
          //console.log(document.querySelector('[data-editteachersclasses="true"]').parentElement.parentElement.getAttribute("data-classes"));
          //console.log(myarray);
          var classid = document.querySelector('[data-editteachersclasses="true"]').parentElement.parentElement.getAttribute("data-classes");

          var j;

/*
          //var requestTeachersURL = 'http://127.0.0.1:5000/api/teachers/' + myarray[j];
          var requestTeachersURL = 'http://127.0.0.1:5000/api/teachers/1/akafirstname';
          var requestTeachers = new XMLHttpRequest();



          //headers = {'Content-Type': 'application/json'};

          requestTeachers.open('DELETE', requestTeachersURL, true);




          //http.open("POST", url, true);

          //Send the proper header information along with the request
          requestTeachers.setRequestHeader("Content-type", "application/json");

          requestTeachers.send();

          //console.log(requestTeachers);

          requestTeachers.onreadystatechange = function() {//Call a function when the state changes.
              if(requestTeachers.readyState == 4 && requestTeachers.status == 200) {
                alert(requestTeachers.responseText);
              } else {
                alert(requestTeachers.responseText);
              }
          }
          //requestClasses.send(params);
*/
          var data = {};
          data['teachers'] = [];

          for (j = 0; j < myarray.length; j++) {


            var newdata = {};

            var teacherid = myarray[j];

            //data1['id'] = teacherid;
            //data2['id'] = 2;

            newdata['id'] = teacherid;
            console.log(newdata);

            //data['teachers'] = [data1, data2];
            data['teachers'].push(newdata);
            //data3['akalastname'] = "test";




          }
          console.log(data);
          console.log(JSON.stringify(data));
          var requestTeachersURL = 'http://127.0.0.1:5000/api/classes/' + classid + '/teachers';

          var requestTeachers = new XMLHttpRequest();



          //headers = {'Content-Type': 'application/json'};

          requestTeachers.open('PATCH', requestTeachersURL, true);




          //http.open("POST", url, true);

          //Send the proper header information along with the request
          requestTeachers.setRequestHeader("Content-type", "application/json");

          requestTeachers.send(JSON.stringify(data));
          //requestTeachers.send();

          console.log(requestTeachers);

          requestTeachers.onreadystatechange = function() {//Call a function when the state changes.
              if(requestTeachers.readyState == 4 && requestTeachers.status == 200) {
                //alert(requestTeachers.responseText);
              } else {
                //alert(requestTeachers.responseText);
              }
          }
          console.log(JSON.stringify(data));


          //event.target.blur();


          //event.target.dataset.editteachersclasses = true;
          //event.target.parentElement.parentElement.style.backgroundColor = "rgba(59, 153, 252, 0.1)";

          document.getElementById('availableteachersbox').style.display = "none";
          document.querySelector('[data-editteachersclasses="true"]').parentElement.parentElement.style.backgroundColor = "rgba(255, 255, 255)";
          document.querySelector('[data-editteachersclasses="true"]').dataset.editteachersclasses = false;
          event.preventDefault();


          //getAttribute("data-classes")


        });


        var checkboxlist = document.getElementsByClassName("availableteachers-checkboxes");

        //var availableteachersRadioAll = document.getElementById('availableteachers-radio-all');
        //var availableteachersRadioNone = document.getElementById('availableteachers-radio-none');

        for (i = 0; i < checkboxlist.length; i++) {
          checkboxlist[i].checked = false;
          checkboxlist[i].addEventListener("change", function() {

            //console.log(document.querySelector('[data-editteachersclasses="true"]').getAttribute("data-teachersclasses"));

            var myteachers = document.querySelector('[data-editteachersclasses="true"]').textContent;
            var myteachersarray = myteachers.split(", ");
            var myarray = document.querySelector('[data-editteachersclasses="true"]').getAttribute("data-teachersclasses").split(", ");
            //console.log(myarray);
            var j;



            //console.log(this.checked);
            //console.log(myarray.length);
            var found = false;

            for (j = 0; j < myarray.length; j++) {
              //console.log(myarray[j]);
              if (myarray[j] == this.getAttribute("data-availableteachers")) {
                found = true;
                if (this.checked == false) {
                  myarray.splice(j, 1);
                  myteachersarray.splice(j, 1);
                }
              }
            }
            //console.log(this.parentElement.children[1].textContent);



            var initials = this.parentElement.children[1].textContent.split(' ').map(function(item){return item[0]}).join('');
            //console.log(initials);             // ['J','S','O','N']

            if (found == false) {
              if (this.checked == true) {
                myarray.push(this.getAttribute("data-availableteachers"));
                //myteachersarray.push(this.parentElement.children[1].textContent);
                myteachersarray.push(initials);
              }
            }
            //console.log(myteachersarray);

            myarray = myarray.filter(Boolean);
            myteachersarray = myteachersarray.filter(Boolean);

            //console.log(myteachersarray);

            if (myteachersarray.length > 1) {
              if (myteachersarray[0] == "None") {
                myteachersarray.splice(0, 1);
              }
            }

            var mystring = "";
            var myteachersstring = "";
            for (j = 0; j < myarray.length; j++) {
              mystring = mystring + ", " + myarray[j];
              myteachersstring = myteachersstring + ", " + myteachersarray[j];
            }

            if (mystring.charAt(0) == ",") {
              mystring = mystring.substring(2);
              myteachersstring = myteachersstring.substring(2);
            }
            //console.log(mystring);

            //var matches = myteachersstring.match(/\b(\w)/g);              // ['J','S','O','N']
            //var myteachersstring = matches.join('');


            document.querySelector('[data-editteachersclasses="true"]').textContent = myteachersstring;
            document.querySelector('[data-editteachersclasses="true"]').dataset.teachersclasses = mystring;
            //console.log(this.getAttribute("data-availableteachers"));
            //availableteachersRadioAll.checked = false;
            //availableteachersRadioNone.checked = false;
          });
        }

        document.getElementById('availableteachersbox').style.display = "none";



/*
        availableteachersRadioAll.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = true;
          }
        });

        availableteachersRadioNone.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = false;
          }
        });
        */

        /*
        checkboxlist.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = false;
          }
        });

        */

      }







      function addRooms(code) {
        var div;
        var i;
        var periods;
        var program;
        var year;

        for (i = 0; i < code.length; i++) {

          //console.log(i);

    // Create row element
          div = document.createElement('div');
          div.className = "checkboxblock__entry";

    // Populate row element
          div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input rooms-checkboxes" data-rooms="' + code[i]['id'] + '" id="rooms-checkbox-' + i + '" name="rooms-checkbox-' + i + '" type="checkbox">\
          <label class="field-label-8 w-form-label" for="rooms-checkbox-' + i + '">' + code[i]['name'] + '</label></div>\
            <div class="text-block-16" id="countE"></div>';

    // Append row element
          document.getElementById('roomsBox').appendChild(div);
        }



        var checkboxlist = document.getElementsByClassName("rooms-checkboxes");

        var roomsRadioAll = document.getElementById('rooms-radio-all');
        var roomsRadioNone = document.getElementById('rooms-radio-none');

        for (i = 0; i < checkboxlist.length; i++) {
          checkboxlist[i].checked = true;
          checkboxlist[i].addEventListener("change", function() {
            roomsRadioAll.checked = false;
            roomsRadioNone.checked = false;

            //Add or remove course from schedule
            var schedulelist;
            schedulelist = document.getElementById('schedule').children;

            //console.log(this);
            //console.log(this.getAttribute("data-courses"));

            for (j = 1; j < schedulelist.length; j++) {
              //console.log(schedulelist[i]);
              //console.log(schedulelist[j].children[0].children[5].textContent);
              //console.log(this.nextSibling.textContent);
              //console.log(schedulelist[j].children[0].children[5]);
              //console.log(schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses"));
              var roomsvar = document.querySelector("[data-rooms='" + schedulelist[j].children[0].children[4].getAttribute("data-roomsclasses") + "']");
              var classtypesvar = document.querySelector("[data-classtypes='" + schedulelist[j].children[0].children[2].getAttribute("data-classtypesclasses") + "']");
              var coursesvar = document.querySelector("[data-courses='" + schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses") + "']");
//console.log(testvar.checked);

              if (classtypesvar.checked == false || coursesvar.checked == false || roomsvar.checked == false) {
                schedulelist[j].style.display = "none";
              } else {
                schedulelist[j].style.display = "";
              }
/*
              n = schedulelist[j].children[0].children[5].textContent.search(this.nextSibling.textContent);
              if (n !== -1) {
                if (this.checked == true) {
                  schedulelist[j].style.display = "";
                } else {
                  schedulelist[j].style.display = "none";
                }
              }
              */
            }
          });
        }



        roomsRadioAll.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = true;
          }
          var schedulelist;
          schedulelist = document.getElementById('schedule').children;

          console.log(this);
          console.log(this.getAttribute("data-courses"));

          for (j = 1; j < schedulelist.length; j++) {
            //console.log(schedulelist[i]);
            //console.log(schedulelist[j].children[0].children[5].textContent);
            //console.log(this.nextSibling.textContent);
            //console.log(schedulelist[j].children[0].children[5]);
            //console.log(schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses"));
            var roomsvar = document.querySelector("[data-rooms='" + schedulelist[j].children[0].children[4].getAttribute("data-roomsclasses") + "']");
            var classtypesvar = document.querySelector("[data-classtypes='" + schedulelist[j].children[0].children[2].getAttribute("data-classtypesclasses") + "']");
            var coursesvar = document.querySelector("[data-courses='" + schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses") + "']");
//console.log(testvar.checked);

            if (classtypesvar.checked == false || coursesvar.checked == false || roomsvar.checked == false) {
              schedulelist[j].style.display = "none";
            } else {
              schedulelist[j].style.display = "";
            }
/*
            n = schedulelist[j].children[0].children[5].textContent.search(this.nextSibling.textContent);
            if (n !== -1) {
              if (this.checked == true) {
                schedulelist[j].style.display = "";
              } else {
                schedulelist[j].style.display = "none";
              }
            }
            */
          }
        });

        roomsRadioNone.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = false;
          }
          var schedulelist;
          schedulelist = document.getElementById('schedule').children;

          console.log(this);
          console.log(this.getAttribute("data-courses"));

          for (j = 1; j < schedulelist.length; j++) {
            //console.log(schedulelist[i]);
            //console.log(schedulelist[j].children[0].children[5].textContent);
            //console.log(this.nextSibling.textContent);
            //console.log(schedulelist[j].children[0].children[5]);
            //console.log(schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses"));
            var roomsvar = document.querySelector("[data-rooms='" + schedulelist[j].children[0].children[4].getAttribute("data-roomsclasses") + "']");
            var classtypesvar = document.querySelector("[data-classtypes='" + schedulelist[j].children[0].children[2].getAttribute("data-classtypesclasses") + "']");
            var coursesvar = document.querySelector("[data-courses='" + schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses") + "']");
//console.log(testvar.checked);

            if (classtypesvar.checked == false || coursesvar.checked == false || roomsvar.checked == false) {
              schedulelist[j].style.display = "none";
            } else {
              schedulelist[j].style.display = "";
            }
/*
            n = schedulelist[j].children[0].children[5].textContent.search(this.nextSibling.textContent);
            if (n !== -1) {
              if (this.checked == true) {
                schedulelist[j].style.display = "";
              } else {
                schedulelist[j].style.display = "none";
              }
            }
            */
          }
        });

        /*
        checkboxlist.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = false;
          }
        });

        */

      }



      function addTeachers(code) {
        var div;
        var i;
        var periods;
        var program;
        var year;

        for (i = 0; i < code.length; i++) {

          //console.log(i);

    // Create row element
          div = document.createElement('div');
          div.className = "checkboxblock__entry";

    // Populate row element
          div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input teachers-checkboxes" data-teachers="' + code[i]['id'] + '" id="teachers-checkbox-' + i + '" name="teachers-checkbox-' + i + '" type="checkbox">\
          <label class="field-label-8 w-form-label" for="teachers-checkbox-' + i + '">' + code[i]['firstname'] + ' ' + code[i]['lastname'] + '</label></div>\
            <div class="text-block-16" id="countE"></div>';

    // Append row element
          document.getElementById('teacherscheckboxes').appendChild(div);
        }



        var checkboxlist = document.getElementsByClassName("teachers-checkboxes");

        var teachersRadioAll = document.getElementById('teachers-radio-all');
        var teachersRadioNone = document.getElementById('teachers-radio-none');

        for (i = 0; i < checkboxlist.length; i++) {
          checkboxlist[i].checked = true;
          checkboxlist[i].addEventListener("change", function() {
            teachersRadioAll.checked = false;
            teachersRadioNone.checked = false;
          });
        }



        teachersRadioAll.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = true;
          }
        });

        teachersRadioNone.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = false;
          }
        });

        /*
        checkboxlist.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = false;
          }
        });

        */

      }


      // MAKE ONE FOR CLASSTYPES

      function addCourses(code) {
        var div;
        var i;
        var periods;
        var program;
        var year;

        var dict;

        dict = [];

        document.getElementById('courseNameHeadline').textContent = code[0]['code'];



        for (i = 0; i < code.length; i++) {

          //console.log(code[i]['code']);

    // Create row element
          div = document.createElement('div');
          div.className = "checkboxblock__entry";

    // Populate row element
          div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input courses-checkboxes" data-courses="' + code[i]['id'] + '" id="courses-checkbox-' + i + '" type="checkbox"><label class="field-label-8 w-form-label">' + code[i]['code'] + '</label></div>\
            <div class="text-block-16"></div>';

    // Append row element
          document.getElementById('coursesBox2').appendChild(div);

          dict.push({
            key:"courses-checkbox-" + i,
            value: true
          });


        }

        var checkboxlist = document.getElementsByClassName("courses-checkboxes");

        var coursesRadioAll = document.getElementById('courses-radio-all');
        var coursesRadioNone = document.getElementById('courses-radio-none');

        for (i = 0; i < checkboxlist.length; i++) {
          checkboxlist[i].checked = true;
          checkboxlist[i].addEventListener("change", function() {
            coursesRadioAll.checked = false;
            coursesRadioNone.checked = false;

            //Add or remove course from schedule
            var schedulelist;
            schedulelist = document.getElementById('schedule').children;

            //console.log(this);
            //console.log(this.getAttribute("data-courses"));

            for (j = 1; j < schedulelist.length; j++) {
              //console.log(schedulelist[i]);
              //console.log(schedulelist[j].children[0].children[5].textContent);
              //console.log(this.nextSibling.textContent);
              //console.log(schedulelist[j].children[0].children[5]);
              //console.log(schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses"));
              var roomsvar = document.querySelector("[data-rooms='" + schedulelist[j].children[0].children[4].getAttribute("data-roomsclasses") + "']");
              var classtypesvar = document.querySelector("[data-classtypes='" + schedulelist[j].children[0].children[2].getAttribute("data-classtypesclasses") + "']");
              var coursesvar = document.querySelector("[data-courses='" + schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses") + "']");
//console.log(testvar.checked);

              if (classtypesvar.checked == false || coursesvar.checked == false || roomsvar.checked == false) {
                schedulelist[j].style.display = "none";
              } else {
                schedulelist[j].style.display = "";
              }
/*
              n = schedulelist[j].children[0].children[5].textContent.search(this.nextSibling.textContent);
              if (n !== -1) {
                if (this.checked == true) {
                  schedulelist[j].style.display = "";
                } else {
                  schedulelist[j].style.display = "none";
                }
              }
              */
            }
          });
        }

        coursesRadioAll.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = true;
          }

          var schedulelist;
          schedulelist = document.getElementById('schedule').children;

          //console.log(this);
          //console.log(this.getAttribute("data-courses"));

          for (j = 1; j < schedulelist.length; j++) {
            //console.log(schedulelist[i]);
            //console.log(schedulelist[j].children[0].children[5].textContent);
            //console.log(this.nextSibling.textContent);
            //console.log(schedulelist[j].children[0].children[5]);
            //console.log(schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses"));
            var roomsvar = document.querySelector("[data-rooms='" + schedulelist[j].children[0].children[4].getAttribute("data-roomsclasses") + "']");
            var classtypesvar = document.querySelector("[data-classtypes='" + schedulelist[j].children[0].children[2].getAttribute("data-classtypesclasses") + "']");
            var coursesvar = document.querySelector("[data-courses='" + schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses") + "']");
//console.log(testvar.checked);

            if (classtypesvar.checked == false || coursesvar.checked == false || roomsvar.checked == false) {
              schedulelist[j].style.display = "none";
            } else {
              schedulelist[j].style.display = "";
            }
/*
            n = schedulelist[j].children[0].children[5].textContent.search(this.nextSibling.textContent);
            if (n !== -1) {
              if (this.checked == true) {
                schedulelist[j].style.display = "";
              } else {
                schedulelist[j].style.display = "none";
              }
            }
            */
          }
        });

        coursesRadioNone.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = false;
          }
          //display none för samtliga classes
          var schedulelist;
          schedulelist = document.getElementById('schedule').children;

          console.log(this);
          console.log(this.getAttribute("data-courses"));

          for (j = 1; j < schedulelist.length; j++) {
            //console.log(schedulelist[i]);
            //console.log(schedulelist[j].children[0].children[5].textContent);
            //console.log(this.nextSibling.textContent);
            //console.log(schedulelist[j].children[0].children[5]);
            //console.log(schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses"));
            var roomsvar = document.querySelector("[data-rooms='" + schedulelist[j].children[0].children[4].getAttribute("data-roomsclasses") + "']");
            var classtypesvar = document.querySelector("[data-classtypes='" + schedulelist[j].children[0].children[2].getAttribute("data-classtypesclasses") + "']");
            var coursesvar = document.querySelector("[data-courses='" + schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses") + "']");
//console.log(testvar.checked);

            if (classtypesvar.checked == false || coursesvar.checked == false || roomsvar.checked == false) {
              schedulelist[j].style.display = "none";
            } else {
              schedulelist[j].style.display = "";
            }
/*
            n = schedulelist[j].children[0].children[5].textContent.search(this.nextSibling.textContent);
            if (n !== -1) {
              if (this.checked == true) {
                schedulelist[j].style.display = "";
              } else {
                schedulelist[j].style.display = "none";
              }
            }
            */
          }
        });


        /*
        checkboxlist.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = false;
          }
        });
        */

        return dict;

      }


      function addClasstypes(code) {
        var div;
        var i;
        var periods;
        var program;
        var year;

        for (i = 0; i < code.length; i++) {

          //console.log(code[i]['code']);

      // Create row element
          div = document.createElement('div');
          div.className = "checkboxblock__entry";

      // Populate row element
          div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input classtypes-checkboxes" data-classtypes="' + code[i]['id'] + '" id="classtypes-checkbox-' + i + '" type="checkbox"><label class="field-label-8 w-form-label">' + code[i]['classtype'] + '</label></div>\
            <div class="text-block-16"></div>';

      // Append row element
          document.getElementById('classtypesBox').appendChild(div);
        }

        var checkboxlist = document.getElementsByClassName("classtypes-checkboxes");

        var classtypesRadioAll = document.getElementById('classtypes-radio-all');
        var classtypesRadioNone = document.getElementById('classtypes-radio-none');

        for (i = 0; i < checkboxlist.length; i++) {
          checkboxlist[i].checked = true;
          checkboxlist[i].addEventListener("change", function() {
            classtypesRadioAll.checked = false;
            classtypesRadioNone.checked = false;

            //Add or remove course from schedule
            var schedulelist;
            schedulelist = document.getElementById('schedule').children;

            for (j = 1; j < schedulelist.length; j++) {
              //console.log(schedulelist[i]);
              //console.log(schedulelist[j].children[0].children[5].textContent);
              //console.log(this.nextSibling.textContent);

              var roomsvar = document.querySelector("[data-rooms='" + schedulelist[j].children[0].children[4].getAttribute("data-roomsclasses") + "']");
              var classtypesvar = document.querySelector("[data-classtypes='" + schedulelist[j].children[0].children[2].getAttribute("data-classtypesclasses") + "']");
              var coursesvar = document.querySelector("[data-courses='" + schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses") + "']");
//console.log(testvar.checked);

              if (classtypesvar.checked == false || coursesvar.checked == false || roomsvar.checked == false) {
                schedulelist[j].style.display = "none";
              } else {
                schedulelist[j].style.display = "";
              }
              /*
              n = schedulelist[j].children[0].children[2].textContent.search(this.nextSibling.textContent.charAt(0));
              if (n !== -1) {
                if (this.checked == true) {
                  schedulelist[j].style.display = "";
                } else {
                  schedulelist[j].style.display = "none";
                }
              }*/
            }
          });
        }

        classtypesRadioAll.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = true;
          }

          var schedulelist;
          schedulelist = document.getElementById('schedule').children;

          console.log(this);
          console.log(this.getAttribute("data-courses"));

          for (j = 1; j < schedulelist.length; j++) {
            //console.log(schedulelist[i]);
            //console.log(schedulelist[j].children[0].children[5].textContent);
            //console.log(this.nextSibling.textContent);
            //console.log(schedulelist[j].children[0].children[5]);
            //console.log(schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses"));
            var roomsvar = document.querySelector("[data-rooms='" + schedulelist[j].children[0].children[4].getAttribute("data-roomsclasses") + "']");
            var classtypesvar = document.querySelector("[data-classtypes='" + schedulelist[j].children[0].children[2].getAttribute("data-classtypesclasses") + "']");
            var coursesvar = document.querySelector("[data-courses='" + schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses") + "']");
//console.log(testvar.checked);

            if (classtypesvar.checked == false || coursesvar.checked == false || roomsvar.checked == false) {
              schedulelist[j].style.display = "none";
            } else {
              schedulelist[j].style.display = "";
            }
/*
            n = schedulelist[j].children[0].children[5].textContent.search(this.nextSibling.textContent);
            if (n !== -1) {
              if (this.checked == true) {
                schedulelist[j].style.display = "";
              } else {
                schedulelist[j].style.display = "none";
              }
            }
            */
          }
        });

        classtypesRadioNone.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = false;
          }
          //display none för samtliga classes
          var schedulelist;
          schedulelist = document.getElementById('schedule').children;

          console.log(this);
          console.log(this.getAttribute("data-courses"));

          for (j = 1; j < schedulelist.length; j++) {
            //console.log(schedulelist[i]);
            //console.log(schedulelist[j].children[0].children[5].textContent);
            //console.log(this.nextSibling.textContent);
            //console.log(schedulelist[j].children[0].children[5]);
            //console.log(schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses"));
            var roomsvar = document.querySelector("[data-rooms='" + schedulelist[j].children[0].children[4].getAttribute("data-roomsclasses") + "']");
            var classtypesvar = document.querySelector("[data-classtypes='" + schedulelist[j].children[0].children[2].getAttribute("data-classtypesclasses") + "']");
            var coursesvar = document.querySelector("[data-courses='" + schedulelist[j].children[0].children[5].getAttribute("data-coursesclasses") + "']");
//console.log(testvar.checked);

            if (classtypesvar.checked == false || coursesvar.checked == false || roomsvar.checked == false) {
              schedulelist[j].style.display = "none";
            } else {
              schedulelist[j].style.display = "";
            }
/*
            n = schedulelist[j].children[0].children[5].textContent.search(this.nextSibling.textContent);
            if (n !== -1) {
              if (this.checked == true) {
                schedulelist[j].style.display = "";
              } else {
                schedulelist[j].style.display = "none";
              }
            }
            */
          }
        });


        /*
        checkboxlist.addEventListener("change", function() {
          for (i = 0; i < checkboxlist.length; i++) {
            checkboxlist[i].checked = false;
          }
        });
        */

      }








      function addClasses(code) {
        var div;
        var i;
        var j;
        var rooms;
        var teachers;
        var coursecode;

        for (i = 0; i < code.length; i++) {

          rooms = "";

          for (j = 0; j < code[i]['rooms'].length; j++) {
            rooms = rooms + "<br>" + code[i]['rooms'][j]['name'].substring(0,9)
          }

    // Erase beginning comma
          if (rooms.charAt(0) == "<") {
            rooms = rooms.substring(4);
          }


          teachers = "";
          teachersid = "";

          for (j = 0; j < code[i]['teachers'].length; j++) {
            teachername = code[i]['teachers'][j]['firstname'] + " " + code[i]['teachers'][j]['lastname'];
            teachername = teachername.split(' ').map(function(item){return item[0]}).join('');
            console.log(teachername);
            teachers = teachers + ", " + teachername;
            teachersid = teachersid + ", " + code[i]['teachers'][j]['id'];
            console.log(teachers);
          }

    // Erase beginning comma

          if (teachers.length < 1) {
            teachers = "None";
            teachersid = "";
          }

          if (teachers.charAt(0) == ",") {
            teachers = teachers.substring(2);
            teachersid = teachersid.substring(2);
          }

          if (code[i]['content'] == null) {
            coursecode = "?";
          } else {
            coursecode = code[i]['content'];

          }

          //console.log(i);
          //console.log(coursecode);


      // Create row element
          div = document.createElement('div');
          div.className = "table-tesla__table__rowbox";
          div.dataset.classes = code[i]['id'];



      // Populate row element
          div.innerHTML = '<div class="table-tesla__table__row">\
              <div class="table-tesla__cell__text">' + code[i]['dates']['date'].substring(2, 4) + code[i]['dates']['date'].substring(5, 7) + code[i]['dates']['date'].substring(8, 10) + '</div>\
              <div class="table-tesla__cell__text">'+ code[i]['starttime'] + '-' + code[i]['endtime'] + '</div>\
              <div class="table-tesla__cell__text" data-classtypesclasses="' + code[i]['classtypes']['id'] + '">' + code[i]['classtypes']['classtype'].charAt(0) + '</div>\
              <div class="table-tesla__cell__text--bold" contenteditable="true">' + coursecode + '</div>\
              <div class="table-tesla__cell__text" data-roomsclasses="' + code[i]['rooms'][0]['id'] + '">' + rooms + '</div>\
              <div class="table-tesla__cell__text" data-teachersclasses="' + teachersid + '" data-editteachersclasses="false">' + teachers + '</div>\
            </div>';

      // Append row element
          document.getElementById('schedule').appendChild(div);
        }

        //console.log(document.querySelectorAll("[data-classcourses='1']"))
        var schedulerows;
        schedulerows = document.getElementsByClassName('table-tesla__table__rowbox');
        var i;

        for (i = 0; i < schedulerows.length; i++) {

          schedulerows[i].children[0].children[5].addEventListener('click', function (event) {
            document.getElementById('availableteachersbox').style.display = "";

            var availableboxes = document.getElementsByClassName('availableteachers-checkboxes');

            //console.log(event.target.getAttribute("data-teachersclasses"));

            var newarray = event.target.getAttribute("data-teachersclasses");

            if (document.querySelector('[data-editteachersclasses="true"]') !== null) {
              var myarray = document.querySelector('[data-editteachersclasses="true"]').getAttribute("data-teachersclasses").split(", ");
              //console.log(document.querySelector('[data-editteachersclasses="true"]').parentElement.parentElement.getAttribute("data-classes"));
              //console.log(myarray);
              var classid = document.querySelector('[data-editteachersclasses="true"]').parentElement.parentElement.getAttribute("data-classes");

              var j;

    /*
              //var requestTeachersURL = 'http://127.0.0.1:5000/api/teachers/' + myarray[j];
              var requestTeachersURL = 'http://127.0.0.1:5000/api/teachers/1/akafirstname';
              var requestTeachers = new XMLHttpRequest();



              //headers = {'Content-Type': 'application/json'};

              requestTeachers.open('DELETE', requestTeachersURL, true);




              //http.open("POST", url, true);

              //Send the proper header information along with the request
              requestTeachers.setRequestHeader("Content-type", "application/json");

              requestTeachers.send();

              //console.log(requestTeachers);

              requestTeachers.onreadystatechange = function() {//Call a function when the state changes.
                  if(requestTeachers.readyState == 4 && requestTeachers.status == 200) {
                    alert(requestTeachers.responseText);
                  } else {
                    alert(requestTeachers.responseText);
                  }
              }
              //requestClasses.send(params);
    */
              var data = {};
              data['teachers'] = [];

              for (j = 0; j < myarray.length; j++) {


                var newdata = {};

                var teacherid = myarray[j];

                //data1['id'] = teacherid;
                //data2['id'] = 2;

                newdata['id'] = teacherid;
                console.log(newdata);

                //data['teachers'] = [data1, data2];
                data['teachers'].push(newdata);
                //data3['akalastname'] = "test";




              }
              console.log(data);
              console.log(JSON.stringify(data));
              var requestTeachersURL = 'http://127.0.0.1:5000/api/classes/' + classid + '/teachers';

              var requestTeachers = new XMLHttpRequest();



              //headers = {'Content-Type': 'application/json'};

              requestTeachers.open('PATCH', requestTeachersURL, true);




              //http.open("POST", url, true);

              //Send the proper header information along with the request
              requestTeachers.setRequestHeader("Content-type", "application/json");

              requestTeachers.send(JSON.stringify(data));
              //requestTeachers.send();

              console.log(requestTeachers);

              requestTeachers.onreadystatechange = function() {//Call a function when the state changes.
                  if(requestTeachers.readyState == 4 && requestTeachers.status == 200) {
                    //alert(requestTeachers.responseText);
                  } else {
                    //alert(requestTeachers.responseText);
                  }
              }
              console.log(JSON.stringify(data));

              document.querySelector('[data-editteachersclasses="true"]').parentElement.parentElement.style.backgroundColor = "rgba(255, 255, 255)";
              document.querySelector('[data-editteachersclasses="true"]').dataset.editteachersclasses = false;


            }

            var k;
            for (k = 0; k < availableboxes.length; k++) {
              //console.log(availableboxes[k]);
              availableboxes[k].checked = false;

            }

            for (j = 0; j < newarray.length; j++) {

              for (k = 0; k < availableboxes.length; k++) {
                //console.log(availableboxes[k]);
                //availableboxes[k].checked = false;
                if (availableboxes[k].getAttribute("data-availableteachers") == newarray[j]) {
                  availableboxes[k].checked = true;
                };
                //console.log(availableboxes[k].getAttribute("data-availableteachers"));

              }
              //console.log("hej");

            }




            event.target.dataset.editteachersclasses = true;
            event.target.parentElement.parentElement.style.backgroundColor = "rgba(59, 153, 252, 0.1)";
            //event.target.parentElement.parentElement.style.backgroundColor = "#3B99FC";
            //console.log(event.target.parentElement.parentElement);
            //
          }, true);




          //console.log(i);
          schedulerows[i].addEventListener('keydown', function (event) {


            var esc = event.which == 27,
                nl = event.which == 13,
                el = event.target,
                input = el.nodeName != 'INPUT' && el.nodeName != 'TEXTAREA',
                data = {};



            if (input) {


              if (esc) {
                // restore state
                document.execCommand('undo');
                el.blur();
              } else if (nl) {
                console.log("fire")

                data['content'] = el.innerHTML;

                //console.log(el.children[0].children[3].innerHTML);
                console.log(el.innerHTML);
                //console.log(el.parent.parent.getAttribute("data-classes"));
                console.log(event.currentTarget.getAttribute("data-classes"));
                //console.log(event.parentElement.nodeName);

                classid = event.currentTarget.getAttribute("data-classes");


                var requestClassesURL = 'http://127.0.0.1:5000/api/classes/' + classid;

                var requestClasses = new XMLHttpRequest();

                //headers = {'Content-Type': 'application/json'};

                requestClasses.open('PUT', requestClassesURL, true);


                //http.open("POST", url, true);

                //Send the proper header information along with the request
                requestClasses.setRequestHeader("Content-type", "application/json");

                requestClasses.onreadystatechange = function() {//Call a function when the state changes.
                    if(requestClasses.readyState == 4 && requestClasses.status == 200) {
                        //alert(requestClasses.responseText);
                    }
                }
                //requestClasses.send(params);



                requestClasses.send(JSON.stringify(data));

                // save
                //data[el.getAttribute('data-name')] = el.innerHTML;

                // we could send an ajax request to update the field
                /*
                $.ajax({
                  url: window.location.toString(),
                  data: data,
                  type: 'post'
                });
                */
                //log(JSON.stringify(data));

                el.blur();
                event.preventDefault();
              }
            }
          }, true);

        }
      }



// Request teachers for left panel
      var requestTeachersURL = 'http://127.0.0.1:5000/api/teachers?q={"filters":[{"name":"examiner","op":"any","val":{"name":"code","op":"==","val":"AI2808"}}]}';

      var requestTeachers = new XMLHttpRequest();

      requestTeachers.open('GET', requestTeachersURL);

      requestTeachers.responseType = 'json';

      requestTeachers.send();

      requestTeachers.onload = function() {
        var jsonObj = requestTeachers.response;
        //populateTable(jsonObj);
        //addRow(jsonObj['objects'][0]['code']);
        addTeachers(jsonObj['objects']);

      }


// Request teachers for left panel
      var requestAvailableTeachersURL = 'http://127.0.0.1:5000/api/teachers';

      var requestAvailableTeachers = new XMLHttpRequest();

      requestAvailableTeachers.open('GET', requestAvailableTeachersURL);

      requestAvailableTeachers.responseType = 'json';

      requestAvailableTeachers.send();

      requestAvailableTeachers.onload = function() {
        var jsonObj = requestAvailableTeachers.response;
        //populateTable(jsonObj);
        //addRow(jsonObj['objects'][0]['code']);
        addAvailableTeachers(jsonObj['objects']);

      }

// Request courses for right panel
      var requestCoursesURL = 'http://127.0.0.1:5000/api/courses?q={"filters":[{"name":"code","op":"==","val":"AI2808"}]}';

      var requestCourses = new XMLHttpRequest();

      requestCourses.open('GET', requestCoursesURL);

      requestCourses.responseType = 'json';

      requestCourses.send();

      requestCourses.onload = function() {
        var jsonObj = requestCourses.response;
        //populateTable(jsonObj);
        //addRow(jsonObj['objects'][0]['code']);
        var coursesDict = addCourses(jsonObj['objects']);

        //console.log(coursesDict);

      }


// Request classtypes for right panel
      var requestClasstypesURL = 'http://127.0.0.1:5000/api/classtypes';

      var requestClasstypes = new XMLHttpRequest();

      requestClasstypes.open('GET', requestClasstypesURL);

      requestClasstypes.responseType = 'json';

      requestClasstypes.send();

      requestClasstypes.onload = function() {
        var jsonObj = requestClasstypes.response;
        //populateTable(jsonObj);
        //addRow(jsonObj['objects'][0]['code']);
        addClasstypes(jsonObj['objects']);

      }



// Request classes for mid panel
      //var requestClassesURL = 'http://127.0.0.1:5000/api/classes?q={"order_by":[{"field": "dates__date", "direction": "asc"}]}';
      var requestClassesURL = 'http://127.0.0.1:5000/api/classes?q={"filters":[{"name":"courses","op":"has","val":{"name":"code","op":"==","val":"AI2808"}}],"order_by":[{"field": "dates__date", "direction": "asc"}]}';

      var requestClasses = new XMLHttpRequest();

      requestClasses.open('GET', requestClassesURL);

      requestClasses.responseType = 'json';

      requestClasses.send();

      requestClasses.onload = function() {
        var jsonObj = requestClasses.response;
        //populateTable(jsonObj);
        //addRow(jsonObj['objects'][0]['code']);


        addClasses(jsonObj['objects']);

/*
        addClasses(jsonObj['objects'].sort(function(a, b) {
            return parseFloat(a.starttime) - parseFloat(b.starttime);
        }));
*/

      }




  // Request classes for mid panel
        //var requestClassesURL = 'http://127.0.0.1:5000/api/classes?q={"order_by":[{"field": "dates__date", "direction": "asc"}]}';
        var requestRoomsURL = 'http://127.0.0.1:5000/api/rooms?q={"filters":[{"name":"classes","op":"any","val":{"name":"courses_id","op":"==","val":95}}]}';

        var requestRooms = new XMLHttpRequest();

        requestRooms.open('GET', requestRoomsURL);

        requestRooms.responseType = 'json';

        requestRooms.send();

        requestRooms.onload = function() {
          var jsonObj = requestRooms.response;
          //populateTable(jsonObj);
          //addRow(jsonObj['objects'][0]['code']);


          addRooms(jsonObj['objects']);

  /*
          addClasses(jsonObj['objects'].sort(function(a, b) {
              return parseFloat(a.starttime) - parseFloat(b.starttime);
          }));
  */

        }











  function onesCourses() {
    var kurs = {};
    for (i = 0; i < courses.length; i++) {
      kurs[courses[i]["name"]] = courses[i]["status"];
    }
    return kurs;
  };
  function checkboxChangeOnesCourses(mybutton, mytext, type) {
    if (mybutton.checked) {
      if (type == "kurs") {
      	kurs[mytext] = 1;
      }
      if (type == "typ") {
        typ[mytext] = 1;
      }
    }
    else {
      if (type == "kurs") {
        kurs[mytext] = 0;
      }
      if (type == "typ") {
        typ[mytext] = 0;
      }
    }
    for (i = 1; i < rowlist.length; i++) {
      var typcol = rowlist[i].children[0].children[2].innerHTML;
      var kurscol = rowlist[i].children[0].children[5].innerHTML;
      if (typ[typcol] == 1 && kurs[kurscol] == 1) {
        rowlist[i].style.display = 'block';
      } else {
        rowlist[i].style.display = 'none';
      }
      if (type == "kurs") {
        if (kurscol == mytext) {
          //alert(typcol);
          if (typcol == "F") {
            if (mybutton.checked) {
              countF += 2;
            } else {
              countF -= 2;
            }
            countFElement.innerHTML = countF;
          }
          if (typcol == "E") {
            if (mybutton.checked) {
              countE += 2;
            } else {
              countE -= 2;
            }
            countEElement.innerHTML = countE;
          }
          if (typcol == "S") {
            if (mybutton.checked) {
              countS += 2;
            } else {
              countS -= 2;
            }
            countSElement.innerHTML = countS;
          }
        }
      }
      if (type == "typ") {
        if (typcol == mytext) {
        	if (mybutton.checked) {
          	for (j = 0; j < courses.length; j++) {
              if (courses[j]["name"] == kurscol) {
                  document.getElementById(courses[j]["id"]["counter"]).innerHTML = Number(document.getElementById(courses[j]["id"]["counter"]).innerHTML) + 2;
              }
          	}
          } else {
          	for (j = 0; j < courses.length; j++) {
              if (courses[j]["name"] == kurscol) {
                  document.getElementById(courses[j]["id"]["counter"]).innerHTML = Number(document.getElementById(courses[j]["id"]["counter"]).innerHTML) - 2;
              }
          	}
          }
        }
      }
    }
  };
</script>
  <script>


	document.addEventListener("DOMContentLoaded", function() {





    //function log(s) {
      //document.getElementById('debug').innerHTML = 'value changed to: ' + s;
    //}





    document.getElementById("teachers-radio-all").checked = false;
    document.getElementById("teachers-radio-none").checked = false;












    var requestURL = 'http://dansfolk.no-ip.org:5000/typ';
    var request = new XMLHttpRequest();
    request.open('GET', requestURL);
    request.responseType = 'json';
    request.send();
    var requestURL2 = 'http://dansfolk.no-ip.org:5000/courses';
    var request2 = new XMLHttpRequest();
    request2.open('GET', requestURL2);
    request2.responseType = 'json';
    request2.send();
    var typ = {};
    var courses = [];
    request.onreadystatechange = function() {
      if (request.status == 200 && request.readyState == 4 && request2.status == 200 && request2.readyState == 4) {
        courses = request2.response["courses"];
        typ = request.response["typ"];
        goAfterCall();
      };
    };
    request2.onreadystatechange = function() {
      if (request.status == 200 && request.readyState == 4 && request2.status == 200 && request2.readyState == 4) {
        courses = request2.response["courses"];
        typ = request.response["typ"];
        goAfterCall();
      };
    };
    function goAfterCall() {
      var requestURL3 = 'http://dansfolk.no-ip.org:5000/typ';
      var request3 = new XMLHttpRequest();
      request3.open('GET', requestURL3);
      request3.responseType = 'json';
      request3.send();
      request3.onreadystatechange = function() {
        if (request3.status == 200 && request3.readyState == 4) {
          myresponse = request3.response["objects"][0]["name"];
          console.log(myresponse)
        };
      };
      function checkboxChangeOnesCourses(mybutton, mytext, type) {
        if (mybutton.checked) {
          if (type == "kurs") {
            kurs[mytext] = 1;
          }
          if (type == "typ") {
            typ[mytext] = 1;
          }
        } else {
          if (type == "kurs") {
            kurs[mytext] = 0;
          }
          if (type == "typ") {
            typ[mytext] = 0;
          }
        }
        for (i = 1; i < rowlist.length; i++) {
          var typcol = rowlist[i].children[0].children[2].innerHTML;
          var kurscol = rowlist[i].children[0].children[5].innerHTML;
          if (typ[typcol] == 1 && kurs[kurscol] == 1) {
            rowlist[i].style.display = 'block';
          } else {
            rowlist[i].style.display = 'none';
          }
          if (type == "kurs") {
            if (kurscol == mytext) {
              //alert(typcol);
              if (typcol == "F") {
                if (mybutton.checked) {
                  countF += 2;
                } else {
                  countF -= 2;
                }
                countFElement.innerHTML = countF;
              }
              if (typcol == "E") {
                if (mybutton.checked) {
                  countE += 2;
                } else {
                  countE -= 2;
                }
                countEElement.innerHTML = countE;
              }
              if (typcol == "S") {
                if (mybutton.checked) {
                  countS += 2;
                } else {
                  countS -= 2;
                }
                countSElement.innerHTML = countS;
              }
            }
          }
          if (type == "typ") {
            if (typcol == mytext) {
              if (mybutton.checked) {
                for (j = 0; j < courses.length; j++) {
                  if (courses[j]["name"] == kurscol) {
                    document.getElementById(courses[j]["id"]["counter"]).innerHTML = Number(document.getElementById(courses[j]["id"]["counter"]).innerHTML) + 2;
                  }
                }
              } else {
                for (j = 0; j < courses.length; j++) {
                  if (courses[j]["name"] == kurscol) {
                    document.getElementById(courses[j]["id"]["counter"]).innerHTML = Number(document.getElementById(courses[j]["id"]["counter"]).innerHTML) - 2;
                  }
                }
              }
            }
          }
        }
      };
      var kurs = {};
      for (i = 0; i < courses.length; i++) {
        kurs[courses[i]["name"]] = courses[i]["status"];
      };
      for (i = 0; i < courses.length; i++) {
        var coursebox = document.getElementById('coursesBox');
        var itm = coursebox.lastChild;
        var cln = itm.cloneNode(true);
        coursebox.appendChild(cln);
        var newEntry = coursebox.lastChild;
        newEntryCheckboxID = courses[i]["id"]["checkbox"];
        newEntryCheckboxDataName = courses[i]["id"]["checkbox"];
        newEntryCheckboxName = courses[i]["id"]["checkbox"];
        newEntryCheckboxFor = courses[i]["id"]["checkbox"];
        newEntryCheckboxLabel = courses[i]["name"];
        newEntryCounterID = courses[i]["id"]["counter"];
        newEntry.firstChild.firstChild.setAttribute("id", newEntryCheckboxID);
        newEntry.firstChild.firstChild.setAttribute("data-name", newEntryCheckboxDataName);
        newEntry.firstChild.firstChild.setAttribute("name", newEntryCheckboxName);
        newEntry.firstChild.children[1].setAttribute("for", newEntryCheckboxFor);
        coursebox.lastChild.firstChild.lastChild.innerHTML = newEntryCheckboxLabel;
        coursebox.lastChild.lastChild.innerHTML = courses[i]["types"]["F"] + courses[i]["types"]["E"] + courses[i]["types"]["S"];
        coursebox.lastChild.lastChild.setAttribute("id", newEntryCounterID);
      }
      coursebox.removeChild(coursebox.firstChild);
      var countF = 0;
      var countE = 0;
      var countS = 0;
      for (i = 0; i < courses.length; i++) {
        countF += courses[i]["types"]["F"];
        countE += courses[i]["types"]["E"];
        countS += courses[i]["types"]["S"];
        document.getElementById(courses[i]["id"]["counter"]).innerHTML = courses[i]["types"]["F"] + courses[i]["types"]["E"] + courses[i]["types"]["S"];;
      }
      var countFElement = document.getElementById('countF');
      var countEElement = document.getElementById('countE');
      var countSElement = document.getElementById('countS');
      countFElement.innerHTML = countF;
      countEElement.innerHTML = countE;
      countSElement.innerHTML = countS;
      var myelement = document.getElementById('schedule');
      var rowlist = myelement.children;
      var e = document.getElementById("krocktestkurs");
      var checkF = document.getElementById('checkbox-F');
      var checkE = document.getElementById('checkbox-E');
      var checkS = document.getElementById('checkbox-S');
      coursebox.addEventListener("change", function(e) {
        for (j = 0; j < courses.length; j++) {
          if (courses[j]["id"]["checkbox"] == e.srcElement.name) {
            var that = document.getElementById(courses[j]["id"]["checkbox"]);
            var name = courses[j]["name"];
            checkboxChangeOnesCourses(that, name, "kurs")
          }
        }
      });
      checkF.addEventListener("change", function() {
        checkboxChangeOnesCourses(this, "F", "typ")
      });
      checkE.addEventListener("change", function() {
        checkboxChangeOnesCourses(this, "E", "typ")
      });
      checkS.addEventListener("change", function() {
        checkboxChangeOnesCourses(this, "S", "typ")
      });
      e.addEventListener("change", function() {
        var text = e.options[e.selectedIndex].text;
        for (i = 1; i < rowlist.length; i++) {
          var x = rowlist[i].children[0].lastChild;
          if (x.innerHTML == text) {
            rowlist[i].style.borderLeft = "4px solid #c00";
            rowlist[i].childNodes[0].style.marginLeft = "-4px";
          } else {
            rowlist[i].style.borderLeft = "0px solid #c00";
            rowlist[i].childNodes[0].style.marginLeft = "0px";
          }
        }
      });
    };
  });
</script>
</body>
</html>
