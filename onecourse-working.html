<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com -->
<!--  Last Published: Thu Aug 10 2017 15:58:54 GMT+0000 (UTC)  -->
<html data-wf-page="5905ee8fe6ee626e6c7169fc" data-wf-site="58ee511d22e1092ac39cacf7">
<head>
  <meta charset="utf-8">
  <title>One Course</title>
  <meta content="Teacher Backup" property="og:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/anderss-stunning-project.webflow.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({
  google: {
    families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic","Roboto:100,100italic,300,300italic,regular,italic,500,500italic,700,700italic,900,900italic","Source Sans Pro:200,200italic,300,300italic,regular,italic,600,600italic,700,700italic,900,900italic"]
  }
});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);
</script>
  <link href="https://daks2k3a4ib2z.cloudfront.net/img/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="https://daks2k3a4ib2z.cloudfront.net/img/webclip.png" rel="apple-touch-icon">
</head>
<body>
  <div class="_100vw">
    <div class="wrapper">
      <div class="wrapper__header">
        <div class="header-tesla">
          <div class="logo-tesla__box">
            <div class="text-block-13">RESURS</div>
          </div>
          <div class="menu-left-tesla">
            <div class="menu-left-tesla__item">KURSER</div>
            <div class="menu-left-tesla__item">LÄRARE</div>
            <div class="menu-left-tesla__item">SALAR</div>
            <div class="menu-left-tesla__item">PERIODER</div>
          </div>
          <div class="menu-right-tesla">
            <div class="menu-right-tesla__item">MITT SCHEMA</div>
            <div class="menu-right-tesla__item">MINA KURSER</div>
            <div class="menu-right-tesla__item">LOG OUT</div>
          </div>
        </div>
      </div>
      <div class="pagetitle-tesla__wrapper">
        <div class="margin__210--left"></div>
        <div class="pagetitle-tesla__box">
          <div class="titlebox-tesla">
            <div class="h-tesla-30-400-000000" id="courseNameHeadline">COURSE NAME</div>
          </div>
        </div>
        <div class="margin__210--right"></div>
      </div>
      <div class="table-tesla">
        <div class="margin__210--left"></div>
        <div class="table-tesla__container">
          <div class="schedule-tesla__right">
            <div class="table-tesla__searchblock">
              <div class="form-wrapper w-form">
                <form data-name="Email Form" id="email-form" name="email-form"><label class="field-label" for="resurs">COURSE</label><select class="select-field w-select" data-name="resurs" id="resurs" name="resurs"></select></form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>

            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">EXAMINER</label>
                  <div id="examinercheckboxes" class="table-tesla__checkbox__fieldbox">
                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>


            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">RESPONSIBLE</label>
                  <div id="responsiblecheckboxes" class="table-tesla__checkbox__fieldbox">
                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>




            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">TEACHER</label>
                  <div id="teacherscheckboxes" class="table-tesla__checkbox__fieldbox">


                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="teachers radio all" id="teachers-radio-all" name="teachers-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">All</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="teachers radio all" id="teachers-radio-none" name="teachers-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">None</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>

                    <!--
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input checked="checked" class="w-checkbox-input" data-name="Checkbox E 2" id="checkbox-E-2" name="checkbox-E-2" type="checkbox"><label class="field-label-8 w-form-label" for="checkbox-E-2">Övning</label></div>
                      <div class="text-block-16" id="countE">233</div>
                    </div>
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input checked="checked" class="w-checkbox-input" data-name="Checkbox S 2" id="checkbox-S-2" name="checkbox-S-2" type="checkbox"><label class="field-label-8 w-form-label" for="checkbox-S-2">Seminarium</label></div>
                      <div class="text-block-16" id="countS">42</div>
                    </div>
                  -->
                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>


            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">KIND</label>
                  <div class="table-tesla__checkbox__fieldbox" id="classtypesBox">





                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>



            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">ROOM</label>
                  <div class="table-tesla__checkbox__fieldbox" id="roomsBox">





                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>

          </div>
          <div class="schedule-tesla__left" id="schedule">
            <div class="table-tesla__table__headerbox">
              <div class="table-tesla__header__lablebox-period">
                <div class="table-tesla__header__cell__text">DATE</div>
              </div>
              <div class="table-tesla__header__lablebox-period">
                <div class="table-tesla__header__cell__text">TIME</div>
              </div>
              <div class="table-tesla__header__lablebox-period">
                <div class="table-tesla__header__cell__text">KIND</div>
              </div>
              <div class="table-tesla__header__lablebox--course">
                <div class="table-tesla__header__cell__text">TITLE</div>
              </div>
              <div class="table-tesla__table__header__lablebox-programandyear">
                <div class="table-tesla__header__cell__text">ROOM</div>
              </div>
              <div class="table-tesla__table__header__lablebox-programandyear">
                <div class="table-tesla__header__cell__text">TEACHER</div>
              </div>
            </div>
          </div>
          <div class="schedule-tesla__right">
            <div class="table-tesla__searchblock">
              <div class="form-wrapper w-form">
                <form data-name="Email Form" id="email-form" name="email-form"><label class="field-label" for="Field-2">YEAR</label><select class="select-field w-select" data-name="Field" id="Field-2" name="Field"><option value="">2017</option>
<option value="First">VT17</option>
<option value="Second">VT16</option>
<option value="Third">VT15</option></select></form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>

            <div class="table-tesla__checkboxblock" id="availableteachersbox">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">NAME</label>
                  <div id="availableteacherscheckboxes" class="table-tesla__checkbox__fieldbox">

<!--
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="availableteachers radio all" id="availableteachers-radio-all" name="availableteachers-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Alla</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="availableteachers radio all" id="availableteachers-radio-none" name="availableteachers-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Ingen</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>

                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input checked="checked" class="w-checkbox-input" data-name="Checkbox E 2" id="checkbox-E-2" name="checkbox-E-2" type="checkbox"><label class="field-label-8 w-form-label" for="checkbox-E-2">Övning</label></div>
                      <div class="text-block-16" id="countE">233</div>
                    </div>
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input checked="checked" class="w-checkbox-input" data-name="Checkbox S 2" id="checkbox-S-2" name="checkbox-S-2" type="checkbox"><label class="field-label-8 w-form-label" for="checkbox-S-2">Seminarium</label></div>
                      <div class="text-block-16" id="countS">42</div>
                    </div>
                  -->
                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>




            <div class="table-tesla__searchblock">
              <div class="form-wrapper w-form">
                <form data-name="Email Form" id="email-form" name="email-form"><label class="field-label" for="Field-2">CONFLICT</label><select class="select-field w-select" data-name="Field" id="Field-2" name="Field"><option value="">TEACHER</option>
<option value="First">VT17</option>
<option value="Second">VT16</option>
<option value="Third">VT15</option></select><select class="select-field w-select" data-name="Field" id="krocktestkurs" name="Field"><option value="Kurs">COURSE</option>
<option value="AI1128">AI1128</option>
<option value="AI1148">AI1147</option>
<option value="AI1148">AI1148</option></select></form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="margin__210--right"></div>
      </div>
    </div>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" type="text/javascript"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
  <script>

  function updateCurrentTeacherlist() {

    var j;
    var i;
    var k;
    var m;
    var schedulelist = document.getElementById('schedule').children;

    for (j = 1; j < schedulelist.length; j++) {



      var myteachers = schedulelist[j].children[0].children[5].getAttribute("data-teachersclasses");
      var myteachersarray = myteachers.split(", ");

      //console.log(myteachersarray);


      var teachersvar = false;


      if (myteachersarray == null) {
        console.log("empty array");
      }

      for (k = 0; k < myteachersarray.length; k++) {
        //console.log(myteachersarray[k]);
        if (myteachersarray[k] != 0) {
          if (document.querySelector("[data-teachers='" + myteachersarray[k] + "']") == null) {
            //console.log("NEED TO ADD " + myteachersarray[k]);
            //console.log(document.getElementById('availableteachers-checkbox-' + myteachersarray[k]));

            var newname = document.querySelector("[data-availableteachers='" + myteachersarray[k] + "']").nextSibling.nextSibling.textContent;
            console.log(newname);

            var newid = document.querySelector("[data-availableteachers='" + myteachersarray[k] + "']").getAttribute("data-availableteachers");
            console.log(document.querySelector("[data-availableteachers='" + myteachersarray[k] + "']").getAttribute("data-availableteachers"));
            i = document.getElementById('teacherscheckboxes').children.length;

            // Create row element
            div = document.createElement('div');
            div.className = "checkboxblock__entry";

            // Populate row element
            div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input teachers-checkboxes" data-teachers="' + newid + '" id="teachers-checkbox-' + i + '" name="teachers-checkbox-' + i + '" type="checkbox" checked>\
            <label class="field-label-8 w-form-label" for="teachers-checkbox-' + i + '">' + newname + '</label></div>\
              <div class="text-block-16" id="countE"></div>';


            div.addEventListener("change", function() {
              var teachersRadioAll;
              var teachersRadioNone;

              teachersRadioAll = document.getElementById('teachers-radio-all');
              teachersRadioNone = document.getElementById('teachers-radio-none');

              teachersRadioAll.checked = false;
              teachersRadioNone.checked = false;

              filterSchedule();
            });


            // Append row element
            document.getElementById('teacherscheckboxes').appendChild(div);

          }
        }

      }




    }


    var teacherslist = document.getElementById('teacherscheckboxes').children;

    var myteacher;
    //console.log(teacherslist);

    for (j = 2; j < teacherslist.length; j++) {
      //console.log(teacherslist[j]);

      //console.log("1");

      myteacher = teacherslist[j].children[0].children[0].getAttribute("data-teachers");


      schedulelist = document.getElementById('schedule').children;

      var teachersvar = false;

      for (k = 1; k < schedulelist.length; k++) {

        var myteachers = schedulelist[k].children[0].children[5].getAttribute("data-teachersclasses");
        var myteachersarray = myteachers.split(", ");

        //console.log(myteachersarray);







        if (myteachersarray == null) {
          console.log("EMPTY");
        }

        for (m = 0; m < myteachersarray.length; m++) {
          //console.log(myteachersarray[k]);
          if (myteachersarray[m] != 0) {
            if (myteachersarray[m] == myteacher) {
              teachersvar = true;
              }
          }

        }

      }

      if (teachersvar == false) {
        //teacherslist[j].style.display = "none";
        teacherslist[j].remove();
      }

    }

  }




  function filterSchedule() {
    schedulelist = document.getElementById('schedule').children;

    for (j = 1; j < schedulelist.length; j++) {

      //var roomsvar = document.querySelector("[data-rooms='" + schedulelist[j].children[0].children[4].getAttribute("data-roomsclasses") + "']");
      var classtypesvar = document.querySelector("[data-classtypes='" + schedulelist[j].children[0].children[2].getAttribute("data-classtypesclasses") + "']");

      var myteachers = schedulelist[j].children[0].children[5].getAttribute("data-teachersclasses");
      var myteachersarray = myteachers.split(", ");

      //console.log(myteachersarray);

      var k;
      var teachersvar = false;


      if (myteachersarray == null) {
        console.log("empty array");
      }

      for (k = 0; k < myteachersarray.length; k++) {
        //console.log(myteachersarray[k]);
        if (document.querySelector("[data-teachers='" + myteachersarray[k] + "']") != null) {
          if (document.querySelector("[data-teachers='" + myteachersarray[k] + "']").checked == true) {
            teachersvar = true;
          }
        } else {
          teachersvar = true;
        }

      }

      //console.log(teachersvar);



      var myrooms = schedulelist[j].children[0].children[4].getAttribute("data-roomsclasses");
      var myroomsarray = myrooms.split(", ");


      var roomsvar = false;



      for (k = 0; k < myroomsarray.length; k++) {
        //console.log(myteachersarray[k]);
        if (document.querySelector("[data-rooms='" + myroomsarray[k] + "']") != null) {
          if (document.querySelector("[data-rooms='" + myroomsarray[k] + "']").checked == true) {
            roomsvar = true;
          }
        } else {
          roomsvar = true;
        }
      }

      //if (classtypesvar.checked == false || coursesvar.checked == false || roomsvar.checked == false) {
      if (classtypesvar.checked == false || roomsvar == false || teachersvar == false) {
        schedulelist[j].style.display = "none";
      } else {
        schedulelist[j].style.display = "";
      }
    }
  }


  function addCourseToTitle(code) {
    document.getElementById('courseNameHeadline').textContent = code[0]['code'] + " " + code[0]['name'];
  }





  function addCoursesToSelect(code) {
    var option;
    var i;
    var codeSelector;


    for (i = 0; i < code.length; i++) {

      // Create row element
      option = document.createElement('option');
      option.value = code[i]['id'];

      // Populate row element
      option.innerHTML = code[i]['code'] + " " + code[i]['name'];

      // Append row element
      document.getElementById('resurs').appendChild(option);




    }

    codeSelector = document.getElementById('resurs');
    codeSelector.addEventListener('change', function() {
      //console.log(this.value);
      requestClasses(this.value);
      requestCourse(this.value);
      requestExaminer(this.value);
      requestResponsible(this.value);
      requestTeachers(this.value);
      requestClasstypes(this.value);
      requestRooms(this.value);
    }, false);
  }





  function addAvailableTeachers(code) {
    var div;
    var i;
    var periods;
    var program;
    var year;
    var submitbutton;

    for (i = 0; i < code.length; i++) {

      // Create row element
      div = document.createElement('div');
      div.className = "checkboxblock__entry";

      // Populate row element
      div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input availableteachers-checkboxes" data-availableteachers="' + code[i]['id'] + '" id="availableteachers-checkbox-' + code[i]['id'] + '" name="availableteachers-checkbox-' + code[i]['id'] + '" type="checkbox">\
      <label class="field-label-8 w-form-label" for="availableteachers-checkbox-' + code[i]['id'] + '">' + code[i]['firstname'] + ' ' + code[i]['lastname'] + '</label></div>\
        <div class="text-block-16" id="countE"></div>';

      // Append row element
      document.getElementById('availableteacherscheckboxes').appendChild(div);
    }

    // BUTTON
    div = document.createElement('div');
    div.className = "checkboxblock__entry";

    div.innerHTML = '<input style="border-radius:3px; background-color:#3B99FC; margin-top:3px; padding:5px; color:white" class="signin-tesla__form__button--submit w-button field-label" data-wait="Please wait..." id="availableteachers-submit" type="button" value="SUBMIT">\
      <div class="text-block-16" id="countE"></div>';

    document.getElementById('availableteacherscheckboxes').appendChild(div);



    submitbutton = document.getElementById("availableteachers-submit");


    //ADD EVENTLISTENER
    submitbutton.addEventListener("click", function(event) {
      var myarray;
      var classid;
      var j;
      var i;
      var data = {};
      var newdata = {};
      var teacherid;
      var requestTeachersURL;
      var requestTeachers;
      var checkboxlist = [];



      myarray = document.querySelector('[data-editclasses="true"]').children[0].children[5].getAttribute("data-teachersclasses").split(", ");
      classid = document.querySelector('[data-editclasses="true"]').getAttribute("data-classes");


      data['teachers'] = [];

      for (j = 0; j < myarray.length; j++) {

        newdata = {};


        if (myarray[j] != 0 || myarray[j] != null || myarray[j] <= 45) {
          teacherid = myarray[j];
        }



        if (myarray[j] != 0 || myarray[j] != null|| myarray[j] <= 45) {
          newdata['id'] = teacherid;

          data['teachers'].push(newdata);

        }



      }

      requestTeachersURL = 'http://127.0.0.1:5000/api/classes/' + classid + '/teachers';

      requestTeachers = new XMLHttpRequest();

      requestTeachers.open('PATCH', requestTeachersURL, true);

      requestTeachers.setRequestHeader("Content-type", "application/json");

      requestTeachers.send(JSON.stringify(data));
      //console.log(JSON.stringify(data));

      requestTeachers.onreadystatechange = function() {
          if(requestTeachers.readyState == 4 && requestTeachers.status == 200) {
            console.log("SentTeachers");
          } else {
            console.log(requestTeachers.readyState);
            console.log(requestTeachers.status);
          }
      }




      document.getElementById('availableteachersbox').style.display = "none";
      document.querySelector('[data-editclasses="true"]').style.backgroundColor = "rgba(255, 255, 255)";
      document.querySelector('[data-editclasses="true"]').dataset.editclasses = false;
      event.preventDefault();



    });


    checkboxlist = document.getElementsByClassName("availableteachers-checkboxes");


    for (i = 0; i < checkboxlist.length; i++) {
      checkboxlist[i].checked = false;

      checkboxlist[i].addEventListener("change", function() {
        var myteachers;
        var myteachersarray = [];
        var myarray = [];
        var found;
        var initials;
        var j;
        var mystring;
        var myteachersstring;


        myteachers = document.querySelector('[data-editclasses="true"]').children[0].children[5].textContent;
        myteachersarray = myteachers.split(", ");
        myarray = document.querySelector('[data-editclasses="true"]').children[0].children[5].getAttribute("data-teachersclasses").split(", ");



        found = false;
        console.log("length:" + myarray.length);

        for (j = 0; j < myarray.length; j++) {
          console.log(myarray[j]);

          if (myarray[j] == this.getAttribute("data-availableteachers")) {

            found = true;
            if (this.checked == false) {
              myarray.splice(j, 1);
              myteachersarray.splice(j, 1);
            }
          }

        }

        initials = this.parentElement.children[1].textContent.split(' ').map(function(item){return item[0]}).join('');

        if (found == false) {
          if (this.checked == true) {
            myarray.push(this.getAttribute("data-availableteachers"));

            myteachersarray.push(initials);
          }
        }

        myarray = myarray.filter(Boolean);
        myteachersarray = myteachersarray.filter(Boolean);

        if (myteachersarray.length > 1) {
          if (myteachersarray[0] == "None" || myteachersarray[0] == "nn") {
            myteachersarray.splice(0, 1);
          }
        }

        mystring = "";
        myteachersstring = "";
        for (j = 0; j < myarray.length; j++) {
          mystring = mystring + ", " + myarray[j];
          myteachersstring = myteachersstring + ", " + myteachersarray[j];
        }

        if (mystring.charAt(0) == ",") {
          mystring = mystring.substring(2);
          myteachersstring = myteachersstring.substring(2);
        }

        console.log("myteachersstring:" + myteachersstring);

        if (mystring.charAt(0) == "0") {
          mystring = mystring.substring(3);
          var myteachersstringarr = myteachersstring.split(", ");
          myteachersstring = myteachersstringarr[0];
        }

        if (mystring == "") {
          myteachersstring = "None";
          mystring = 0;
        }



        document.querySelector('[data-editclasses="true"]').children[0].children[5].textContent = myteachersstring;
        document.querySelector('[data-editclasses="true"]').children[0].children[5].dataset.teachersclasses = mystring;


        updateCurrentTeacherlist();

      });
    }

    document.getElementById('availableteachersbox').style.display = "none";


  }







  function addRooms(code) {
    var div;
    var i;
    var periods;
    var program;
    var year;
    var checkboxlist = [];
    var roomsRadioAll;
    var roomsRadioNone;


    var myNode = document.getElementById('roomsBox');
    while (myNode.firstChild) {
      myNode.removeChild(myNode.firstChild);
    }

    //console.log(myNode);


    // CREATE ROW ELEMENT
    div = document.createElement('div');
    div.className = "checkboxblock__entry";

    // Populate row element
    div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="rooms radio all" id="rooms-radio-all" name="rooms-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">All</label></div>\
    <div class="text-block-16" id="countF"></div>';

    // Append row element
    document.getElementById('roomsBox').appendChild(div);

    div = document.createElement('div');
    div.className = "checkboxblock__entry";

    // Populate row element
    div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="rooms radio all" id="rooms-radio-none" name="rooms-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">None</label></div>\
    <div class="text-block-16" id="countF"></div>';

    document.getElementById('roomsBox').appendChild(div);





    for (i = 0; i < code.length; i++) {

      // Create row element
      div = document.createElement('div');
      div.className = "checkboxblock__entry";

      // Populate row element
      div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input rooms-checkboxes" data-rooms="' + code[i]['id'] + '" id="rooms-checkbox-' + i + '" name="rooms-checkbox-' + i + '" type="checkbox">\
      <label class="field-label-8 w-form-label" for="rooms-checkbox-' + i + '">' + code[i]['name'] + '</label></div>\
        <div class="text-block-16" id="countE"></div>';

      // Append row element
      document.getElementById('roomsBox').appendChild(div);
    }



    checkboxlist = document.getElementsByClassName("rooms-checkboxes");

    roomsRadioAll = document.getElementById('rooms-radio-all');
    roomsRadioNone = document.getElementById('rooms-radio-none');

    for (i = 0; i < checkboxlist.length; i++) {
      checkboxlist[i].checked = true;


      checkboxlist[i].addEventListener("change", function() {
        var roomsRadioAll;
        var roomsRadioNone;
        var schedulelist = [];
        var j;
        var roomsvar;
        var classtypesvar;
        //var coursesvar;
        var roomsvar;


        roomsRadioAll = document.getElementById('rooms-radio-all');
        roomsRadioNone = document.getElementById('rooms-radio-none');

        roomsRadioAll.checked = false;
        roomsRadioNone.checked = false;

        filterSchedule()

      });


    }



    roomsRadioAll.addEventListener("change", function() {
      var roomsvar;
      var classtypesvar;
      //var coursesvar;
      var i;
      var j;
      var checkboxlist = [];
      var schedulelist = [];

      checkboxlist = document.getElementsByClassName("rooms-checkboxes");

      for (i = 0; i < checkboxlist.length; i++) {
        checkboxlist[i].checked = true;
      }

      filterSchedule()
    });

    roomsRadioNone.addEventListener("change", function() {
      var roomsvar;
      var classtypesvar;
      //var coursesvar;
      var i;
      var j;
      var checkboxlist = [];
      var schedulelist = [];

      checkboxlist = document.getElementsByClassName("rooms-checkboxes");

      for (i = 0; i < checkboxlist.length; i++) {
        checkboxlist[i].checked = false;
      }

      filterSchedule()
    });
  }


  function addExaminer(code) {
    var div;
    var i;

    //console.log(code[0]);

    var myNode = document.getElementById('examinercheckboxes');
    while (myNode.firstChild) {
      myNode.removeChild(myNode.firstChild);
    }


    for (i = 0; i < code.length; i++) {

      // Create row element
      div = document.createElement('div');
      div.className = "checkboxblock__entry";

      // Populate row element
      div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input examiner-checkboxes" data-examiner="' + code[i]['id'] + '" id="examiner-checkbox-' + i + '" name="examiner-checkbox-' + i + '" type="checkbox" disabled checked>\
      <label class="field-label-8 w-form-label" for="examiner-checkbox-' + i + '">' + code[i]['firstname'] + ' ' + code[i]['lastname'] + '</label></div>\
        <div class="text-block-16" id="countE"></div>';

      // Append row element
      document.getElementById('examinercheckboxes').appendChild(div);
    }

  }




    function addResponsible(code) {
      var div;
      var i;

      //console.log(code[0]);

      var myNode = document.getElementById('responsiblecheckboxes');
      while (myNode.firstChild) {
        myNode.removeChild(myNode.firstChild);
      }


      for (i = 0; i < code.length; i++) {

        // Create row element
        div = document.createElement('div');
        div.className = "checkboxblock__entry";

        // Populate row element
        div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input responsible-checkboxes" data-responsible="' + code[i]['id'] + '" id="responsible-checkbox-' + code[i]['id'] + '" name="responsible-checkbox-' + code[i]['id'] + '" type="checkbox" disabled checked>\
        <label class="field-label-8 w-form-label" for="responsible-checkbox-' + code[i]['id'] + '">' + code[i]['firstname'] + ' ' + code[i]['lastname'] + '</label></div>\
          <div class="text-block-16" id="countE"></div>';

        // Append row element
        document.getElementById('responsiblecheckboxes').appendChild(div);
      }

    }





  function addTeachers(code) {
    var div;
    var i;
    var periods;
    var program;
    var year;
    var checkboxlist = [];
    var teachersRadioAll;
    var teachersRadioNone;


    var myNode = document.getElementById('teacherscheckboxes');

    //console.log(myNode);

    while (myNode.firstChild) {
      myNode.removeChild(myNode.firstChild);
    }

    //console.log(myNode);


    // CREATE ROW ELEMENT
    div = document.createElement('div');
    div.className = "checkboxblock__entry";

    // Populate row element
    div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="teachers radio all" id="teachers-radio-all" name="teachers-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">All</label></div>\
                          <div class="text-block-16" id="countF"></div>';

    // Append row element
    document.getElementById('teacherscheckboxes').appendChild(div);

    div = document.createElement('div');
    div.className = "checkboxblock__entry";

    // Populate row element
    div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="teachers radio all" id="teachers-radio-none" name="teachers-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">None</label></div>\
    <div class="text-block-16" id="countF"></div>';

    document.getElementById('teacherscheckboxes').appendChild(div);


    for (i = 0; i < code.length; i++) {

      // Create row element
      div = document.createElement('div');
      div.className = "checkboxblock__entry";

      // Populate row element
      div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input teachers-checkboxes" data-teachers="' + code[i]['id'] + '" id="teachers-checkbox-' + code[i]['id'] + '" name="teachers-checkbox-' + code[i]['id'] + '" type="checkbox">\
      <label class="field-label-8 w-form-label" for="teachers-checkbox-' + code[i]['id'] + '">' + code[i]['firstname'] + ' ' + code[i]['lastname'] + '</label></div>\
        <div class="text-block-16" id="countE"></div>';

      // Append row element
      document.getElementById('teacherscheckboxes').appendChild(div);
    }


    checkboxlist = document.getElementsByClassName("teachers-checkboxes");

    teachersRadioAll = document.getElementById('teachers-radio-all');
    teachersRadioNone = document.getElementById('teachers-radio-none');

    teachersRadioAll.checked = false;
    teachersRadioNone.checked = false;

    for (i = 0; i < checkboxlist.length; i++) {
      checkboxlist[i].checked = true;

      checkboxlist[i].addEventListener("change", function() {
        var teachersRadioAll;
        var teachersRadioNone;

        teachersRadioAll = document.getElementById('teachers-radio-all');
        teachersRadioNone = document.getElementById('teachers-radio-none');

        teachersRadioAll.checked = false;
        teachersRadioNone.checked = false;

        filterSchedule();
      });
    }

    teachersRadioAll.addEventListener("change", function() {
      var checkboxlist = [];
      var i;

      checkboxlist = document.getElementsByClassName("teachers-checkboxes");

      for (i = 0; i < checkboxlist.length; i++) {
        checkboxlist[i].checked = true;
      }

      filterSchedule();


    });

    teachersRadioNone.addEventListener("change", function() {
      var checkboxlist = [];
      var i;

      checkboxlist = document.getElementsByClassName("teachers-checkboxes");

      for (i = 0; i < checkboxlist.length; i++) {
        checkboxlist[i].checked = false;
      }

      filterSchedule();
    });
  }




  function addClasstypes(code) {
    var div;
    var i;
    var j;
    var periods;
    var program;
    var year;
    var checkboxlist = [];
    var classtypesRadioAll;
    var classtypesRadioNone;
    var schedulelist = [];
    var roomsvar;
    var classtypesvar;
    //var coursesvar;


    var myNode = document.getElementById('classtypesBox');

    //console.log(myNode);

    while (myNode.firstChild) {
      myNode.removeChild(myNode.firstChild);
    }


    div = document.createElement('div');
    div.className = "checkboxblock__entry";

    // Populate row element
    div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="classtypes radio all" id="classtypes-radio-all" name="classtypes-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Alla</label></div>\
    <div class="text-block-16" id="countF"></div>';

    // Append row element
    document.getElementById('classtypesBox').appendChild(div);



    div = document.createElement('div');
    div.className = "checkboxblock__entry";

    // Populate row element
    div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="classtypes radio all" id="classtypes-radio-none" name="classtypes-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Ingen</label></div>\
    <div class="text-block-16" id="countF"></div>';

    // Append row element
    document.getElementById('classtypesBox').appendChild(div);








    for (i = 0; i < code.length; i++) {

      // Create row element
      div = document.createElement('div');
      div.className = "checkboxblock__entry";

      // Populate row element
      div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input classtypes-checkboxes" data-classtypes="' + code[i]['id'] + '" id="classtypes-checkbox-' + code[i]['id'] + '" type="checkbox"><label class="field-label-8 w-form-label">' + code[i]['classtype'] + '</label></div>\
        <div class="text-block-16"></div>';

      // Append row element
      document.getElementById('classtypesBox').appendChild(div);
    }

    checkboxlist = document.getElementsByClassName("classtypes-checkboxes");

    classtypesRadioAll = document.getElementById('classtypes-radio-all');
    classtypesRadioNone = document.getElementById('classtypes-radio-none');

    for (i = 0; i < checkboxlist.length; i++) {
      checkboxlist[i].checked = true;

      //ADD EVENTLISTENERS FOR CHECKBOXES
      checkboxlist[i].addEventListener("change", function() {
        var classtypesRadioAll;
        var classtypesRadioNone;
        var schedulelist = [];
        var j;
        var roomsvar;
        var classtypesvar;
        //var coursesvar;

        classtypesRadioAll = document.getElementById('classtypes-radio-all');
        classtypesRadioNone = document.getElementById('classtypes-radio-none');

        classtypesRadioAll.checked = false;
        classtypesRadioNone.checked = false;

        filterSchedule();
      });
    }

    //ADD EVENTLISTENERS FOR RADIO ALL
    classtypesRadioAll.addEventListener("change", function() {
      var checkboxlist = [];
      var schedulelist = [];
      var j;
      var i;
      var roomsvar;
      var classtypesvar;
      //var coursesvar;

      checkboxlist = document.getElementsByClassName("classtypes-checkboxes");

      for (i = 0; i < checkboxlist.length; i++) {
        checkboxlist[i].checked = true;
      }

      filterSchedule();
    });

    //ADD EVENTLISTENERS FOR RADIO NONE
    classtypesRadioNone.addEventListener("change", function() {
      var checkboxlist = [];
      var schedulelist = [];
      var j;
      var i;
      var roomsvar;
      var classtypesvar;
      //var coursesvar;

      checkboxlist = document.getElementsByClassName("classtypes-checkboxes");

      for (i = 0; i < checkboxlist.length; i++) {
        checkboxlist[i].checked = false;
      }

      filterSchedule();
    });
  }








  function addClasses(code) {
    var rooms;
    var roomsid;
    var i;
    var j;
    var teachers;
    var teachersid;
    var teachername;
    var coursecode;
    var div;
    var schedulerows;

    var myNode = document.getElementById('schedule');
    while (myNode.firstChild) {
      myNode.removeChild(myNode.firstChild);
    }

    // CREATE ROW ELEMENT
    div = document.createElement('div');
    div.className = "table-tesla__table__headerbox";

    // Populate row element
    div.innerHTML = '<div class="table-tesla__header__lablebox-period">\
            <div class="table-tesla__header__cell__text">DATE</div>\
          </div>\
          <div class="table-tesla__header__lablebox-period">\
            <div class="table-tesla__header__cell__text">TIME</div>\
          </div>\
          <div class="table-tesla__header__lablebox-period">\
            <div class="table-tesla__header__cell__text">KIND</div>\
          </div>\
          <div class="table-tesla__header__lablebox--course">\
            <div class="table-tesla__header__cell__text">TITLE</div>\
          </div>\
          <div class="table-tesla__table__header__lablebox-programandyear">\
            <div class="table-tesla__header__cell__text">ROOM</div>\
          </div>\
          <div class="table-tesla__table__header__lablebox-programandyear">\
            <div class="table-tesla__header__cell__text">TEACHER</div>\
          </div>';

    // Append row element
    document.getElementById('schedule').appendChild(div);


    for (i = 0; i < code.length; i++) {

      //ROOMS
      rooms = "";

      for (j = 0; j < code[i]['rooms'].length; j++) {
        rooms = rooms + ", " + code[i]['rooms'][j]['name'].substring(0,9)
      }

      // Erase beginning comma
      if (rooms.charAt(0) == ",") {
        rooms = rooms.substring(2);
      }

      //TEACHERS
      teachers = "";
      teachersid = "";

      for (j = 0; j < code[i]['teachers'].length; j++) {
        teachername = code[i]['teachers'][j]['firstname'] + " " + code[i]['teachers'][j]['lastname'];
        teachername = teachername.split(' ').map(function(item){return item[0]}).join('');
        teachers = teachers + ", " + teachername;
        teachersid = teachersid + ", " + code[i]['teachers'][j]['id'];
      }

      if (teachers.length < 1) {
        teachers = "None";
        teachersid = "0";
      }

      // Erase beginning comma
      if (teachers.charAt(0) == ",") {
        teachers = teachers.substring(2);
        teachersid = teachersid.substring(2);
      }


      //ROOMS
      rooms = "";
      roomsid = "";

      for (j = 0; j < code[i]['rooms'].length; j++) {
        rooms = rooms + ", " + code[i]['rooms'][j]['name'].substring(0,9)
        roomsid = roomsid + ", " + code[i]['rooms'][j]['id'];
      }

      if (rooms.length < 1) {
        rooms = "None";
        roomsid = "0";
      }

      // Erase beginning comma
      if (rooms.charAt(0) == ",") {
        rooms = rooms.substring(2);
        roomsid = roomsid.substring(2);
      }

      //CONTENT
      if (code[i]['content'] == null) {
        coursecode = "?";
      } else {
        coursecode = code[i]['content'];

      }

      // CREATE ROW ELEMENT
      div = document.createElement('div');
      div.className = "table-tesla__table__rowbox";
      div.dataset.classes = code[i]['id'];
      div.dataset.editclasses = "false";

      // Populate row element
      div.innerHTML = '<div class="table-tesla__table__row">\
          <div class="table-tesla__cell__text">' + code[i]['dates']['date'].substring(2, 4) + code[i]['dates']['date'].substring(5, 7) + code[i]['dates']['date'].substring(8, 10) + '</div>\
          <div class="table-tesla__cell__text">'+ code[i]['starttime'] + '-' + code[i]['endtime'] + '</div>\
          <div class="table-tesla__cell__text" data-classtypesclasses="' + code[i]['classtypes']['id'] + '">' + code[i]['classtypes']['classtype'].charAt(0) + '</div>\
          <div class="table-tesla__cell__text--bold" contenteditable="true">' + coursecode + '</div>\
          <div class="table-tesla__cell__text" data-roomsclasses="' + roomsid + '">' + rooms + '</div>\
          <div class="table-tesla__cell__text" data-teachersclasses="' + teachersid + '">' + teachers + '</div>\
        </div>';

      // Append row element
      document.getElementById('schedule').appendChild(div);
    }



    schedulerows = document.getElementsByClassName('table-tesla__table__rowbox');

    for (i = 0; i < schedulerows.length; i++) {


      //ADD EVENTLISTENER FOR TEACHERS
      schedulerows[i].children[0].children[5].addEventListener('click', function (event) {
        var availableboxes = [];
        var newarray = [];
        var myarray = [];
        var classid;
        var data = {};
        var newdata = {};
        var j;
        var k;
        var m;
        var teacherid;
        var requestTeachersURL;
        var requestTeachers;

        document.getElementById('availableteachersbox').style.display = "";

        availableboxes = document.getElementsByClassName('availableteachers-checkboxes');

        newarray = event.target.getAttribute("data-teachersclasses");


        var schedulelines = document.getElementsByClassName('table-tesla__table__rowbox');

        for (m = 0; m < schedulelines.length; m++) {
          schedulelines[m].dataset.editclasses = false;
          schedulelines[m].style.backgroundColor = "rgba(255, 255, 255)";
        }

        console.log(schedulelines[3]);

        event.target.parentElement.parentElement.dataset.editclasses = true;
        event.target.parentElement.parentElement.style.backgroundColor = "rgba(59, 153, 252, 0.1)";



        if (document.querySelector('[data-editclasses="true"]') !== null) {
          //console.log("newarray" + newarray);
          myarray = document.querySelector('[data-editclasses="true"]').children[0].children[5].getAttribute("data-teachersclasses").split(", ");
          console.log("myarray" + myarray);
          classid = document.querySelector('[data-editclasses="true"]').getAttribute("data-classes");

          data['teachers'] = [];

          for (j = 0; j < myarray.length; j++) {

            newdata = {};

            teacherid = myarray[j];

            newdata['id'] = teacherid;

            console.log("tid" + newdata['id']);

            data['teachers'].push(newdata);

          }

          //console.log(data);
          console.log(JSON.stringify(data));

          requestTeachersURL = 'http://127.0.0.1:5000/api/classes/' + classid + '/teachers';

          requestTeachers = new XMLHttpRequest();

          requestTeachers.open('PATCH', requestTeachersURL, true);

          requestTeachers.setRequestHeader("Content-type", "application/json");

          requestTeachers.send(JSON.stringify(data));

          requestTeachers.onreadystatechange = function() {
              if(requestTeachers.readyState == 4 && requestTeachers.status == 200) {
                console.log("SentTeachers");
              } else {
                console.log(requestTeachers.readyState);
              }
          }

          document.querySelector('[data-editclasses="true"]').style.backgroundColor = "rgba(255, 255, 255)";
          document.querySelector('[data-editclasses="true"]').dataset.editclasses = false;

        }




        for (k = 0; k < availableboxes.length; k++) {
          availableboxes[k].checked = false;
        }

        console.log("newarray: " + newarray);

        for (j = 0; j < myarray.length; j++) {
          for (k = 0; k < availableboxes.length; k++) {
            if (availableboxes[k].getAttribute("data-availableteachers") == myarray[j]) {
              console.log(availableboxes[k].getAttribute("data-availableteachers"));
              availableboxes[k].checked = true;
            }
          }
        }

        event.target.parentElement.parentElement.dataset.editclasses = true;
        event.target.parentElement.parentElement.style.backgroundColor = "rgba(59, 153, 252, 0.1)";

      }, true);


      schedulerows[i].children[0].children[3].addEventListener('click', function (event) {
        //console.log(document.querySelector('[data-editclasses="true"]'));
        if (document.querySelector('[data-editclasses="true"]') != null) {
          //console.log('EJ NULL');
          document.querySelector('[data-editclasses="true"]').style.backgroundColor = "rgba(255, 255, 255)";
          document.querySelector('[data-editclasses="true"]').dataset.editclasses = false;
        }
        event.target.parentElement.parentElement.dataset.editclasses = true;
        event.target.parentElement.parentElement.style.backgroundColor = "rgba(59, 153, 252, 0.1)";
        document.getElementById("availableteachersbox").style.display = "none";
      });

      //ADD EVENTLISTENER FOR CONTENT
      schedulerows[i].addEventListener('keydown', function (event) {


        var esc = event.which == 27,
            nl = event.which == 13,
            el = event.target,
            input = el.nodeName != 'INPUT' && el.nodeName != 'TEXTAREA',
            data = {},
            requestClassesURL,
            requestClasses,
            classid;

        var self = this;



        function foo() {
          var data = {};
          var requestClassesURL;
          var requestClasses;
          var classid;

          //console.log(this);
          //console.log(this.children[0].children[3].innerHTML);
          //console.log(this.getAttribute("data-classes"));

          data['content'] = this.children[0].children[3].innerHTML;

          classid = this.getAttribute("data-classes");


          requestClassesURL = 'http://127.0.0.1:5000/api/classes/' + classid;

          requestClasses = new XMLHttpRequest();

          requestClasses.open('PUT', requestClassesURL, true);

          requestClasses.setRequestHeader("Content-type", "application/json");

          requestClasses.send(JSON.stringify(data));
          this.children[0].children[3].blur();
          //event.preventDefault();

          requestClasses.onreadystatechange = function() {
            if(requestClasses.readyState == 4 && requestClasses.status == 200) {
              console.log("SentContent");
            } else {
              console.log(requestClasses.readyState);
            }
          }

          this.style.backgroundColor = "rgba(255, 255, 255)";
          this.dataset.editclasses = false;

        }





        document.addEventListener("click", function handler(e) {
          foo.call(self);

          //OM KLICKET VAR INOM EN SCHEMARAD - AKTIVERA RADEN

          console.log("CLICK");



          e.currentTarget.removeEventListener(e.type, handler);

        }, false);



        if (input) {


          if (esc) {
            document.execCommand('undo');
            el.blur();
          } else if (nl) {
            //console.log("fire")

            data['content'] = el.innerHTML;

            //console.log(el.innerHTML);

            //console.log(event.currentTarget.getAttribute("data-classes"));

            classid = event.currentTarget.getAttribute("data-classes");


            requestClassesURL = 'http://127.0.0.1:5000/api/classes/' + classid;

            requestClasses = new XMLHttpRequest();

            requestClasses.open('PUT', requestClassesURL, true);

            requestClasses.setRequestHeader("Content-type", "application/json");

            requestClasses.send(JSON.stringify(data));
            el.blur();
            event.preventDefault();

            requestClasses.onreadystatechange = function() {
              if(requestClasses.readyState == 4 && requestClasses.status == 200) {
                console.log("SentContent");
              } else {
                console.log(requestClasses.readyState);
              }
            }

            el.parentElement.parentElement.style.backgroundColor = "rgba(255, 255, 255)";
            el.parentElement.parentElement.dataset.editclasses = false;


          }
        }
      }, true);
    }
  }




/* SET TITLE */


/* ALL INITIAL REQUESTS */



// Request teachers for left panel

/*
  var requestTeachersURL = 'http://127.0.0.1:5000/api/teachers?q={"filters":[{"name":"examiner","op":"any","val":{"name":"code","op":"==","val":"AI2808"}}]}';

  var requestTeachers = new XMLHttpRequest();

  requestTeachers.open('GET', requestTeachersURL);

  requestTeachers.responseType = 'json';

  requestTeachers.send();

  requestTeachers.onreadystatechange = function() {
      if(requestTeachers.readyState == 4 && requestTeachers.status == 200) {
        console.log("GotTeachers");
      } else {
        console.log(requestTeachers.readyState);
      }
  }

  requestTeachers.onload = function() {
    var jsonObj = requestTeachers.response;
    addTeachers(jsonObj['objects']);
  }


*/





function requestExaminer(courseid) {
  // Request teachers for left panel
  var requestExaminerURL = 'http://127.0.0.1:5000/api/teachers?q={"filters":[{"name":"examiner","op":"any","val":{"name":"id","op":"==","val":"' + courseid + '"}}]}';

  var requestExaminer = new XMLHttpRequest();

  requestExaminer.open('GET', requestExaminerURL);

  requestExaminer.responseType = 'json';

  requestExaminer.send();

  requestExaminer.onreadystatechange = function() {
      if(requestExaminer.readyState == 4 && requestExaminer.status == 200) {
        console.log("GotExaminer");
      } else {
        console.log(requestExaminer.readyState);
      }
  }

  requestExaminer.onload = function() {
    var jsonObj = requestExaminer.response;
    addExaminer(jsonObj['objects']);
  }
}


function requestResponsible(courseid) {
  // Request teachers for left panel
  var requestResponsibleURL = 'http://127.0.0.1:5000/api/teachers?q={"filters":[{"name":"responsible","op":"any","val":{"name":"id","op":"==","val":"' + courseid + '"}}]}';

  var requestResponsible = new XMLHttpRequest();

  requestResponsible.open('GET', requestResponsibleURL);

  requestResponsible.responseType = 'json';

  requestResponsible.send();

  requestResponsible.onreadystatechange = function() {
      if(requestResponsible.readyState == 4 && requestResponsible.status == 200) {
        console.log("GotExaminer");
      } else {
        console.log(requestResponsible.readyState);
      }
  }

  requestResponsible.onload = function() {
    var jsonObj = requestResponsible.response;
    addResponsible(jsonObj['objects']);
  }
}


function requestTeachers(courseid) {
  // Request teachers for left panel
  var requestTeachersURL = 'http://127.0.0.1:5000/api/teachers?q={"filters":[{"name":"classes","op":"any","val":{"name":"courses_id","op":"eq","val":' + courseid + '}}]}';

  var requestTeachers = new XMLHttpRequest();

  requestTeachers.open('GET', requestTeachersURL);

  requestTeachers.responseType = 'json';

  requestTeachers.send();

  requestTeachers.onreadystatechange = function() {
      if(requestTeachers.readyState == 4 && requestTeachers.status == 200) {
        console.log("GotTeachers");
      } else {
        console.log(requestTeachers.readyState);
      }
  }

  requestTeachers.onload = function() {
    var jsonObj = requestTeachers.response;
    addTeachers(jsonObj['objects']);
  }
}








// Request available teachers for right panel
  var requestAvailableTeachersURL = 'http://127.0.0.1:5000/api/teachers?q={"filters":[{"name":"firstname","op":"is_not_null","val":"yes"}],"order_by":[{"field": "firstname", "direction": "asc"}]}';

  var requestAvailableTeachers = new XMLHttpRequest();

  requestAvailableTeachers.open('GET', requestAvailableTeachersURL);

  requestAvailableTeachers.responseType = 'json';

  requestAvailableTeachers.send();

  requestAvailableTeachers.onload = function() {
    var jsonObj = requestAvailableTeachers.response;
    addAvailableTeachers(jsonObj['objects']);
  }


  function requestCourses() {

  // Request courses for right panel
    //var requestCoursesURL = 'http://127.0.0.1:5000/api/courses';
    var requestCoursesURL = 'http://127.0.0.1:5000/api/courses?q={"filters":[{"name":"examiner_id","op":"ge","val":1}],"order_by":[{"field": "code", "direction": "asc"}]}';


    var requestCourses = new XMLHttpRequest();

    requestCourses.open('GET', requestCoursesURL);

    requestCourses.responseType = 'json';

    requestCourses.send();

    requestCourses.onload = function() {
      var jsonObj = requestCourses.response;
      //populateTable(jsonObj);
      //addRow(jsonObj['objects'][0]['code']);
      var coursesDict = addCoursesToSelect(jsonObj['objects']);

      //console.log(coursesDict);

    }
  }


  function requestCourse(courseid) {

  // Request courses for right panel
    var requestCourseURL = 'http://127.0.0.1:5000/api/courses?q={"filters":[{"name":"id","op":"==","val":' + courseid + '}]}';

    var requestCourse = new XMLHttpRequest();

    requestCourse.open('GET', requestCourseURL);

    requestCourse.responseType = 'json';

    requestCourse.send();

    requestCourse.onload = function() {
      var jsonObj = requestCourse.response;
      //populateTable(jsonObj);
      //addRow(jsonObj['objects'][0]['code']);
      var coursesDict = addCourseToTitle(jsonObj['objects']);

      //console.log(coursesDict);

    }
  }


  function requestClasstypes(courseid) {

// Request classtypes for left panel
  var requestClasstypesURL = 'http://127.0.0.1:5000/api/classtypes?q={"filters":[{"name":"classes","op":"any","val":{"name":"courses_id","op":"==","val":' + courseid + '}}]}';

  var requestClasstypes = new XMLHttpRequest();

  requestClasstypes.open('GET', requestClasstypesURL);

  requestClasstypes.responseType = 'json';

  requestClasstypes.send();

  requestClasstypes.onreadystatechange = function() {
      if(requestClasstypes.readyState == 4 && requestClasstypes.status == 200) {
        console.log("GotClasstypes");
      } else {
        console.log(requestClasstypes.readyState);
      }
  }

  requestClasstypes.onload = function() {
    var jsonObj = requestClasstypes.response;
    addClasstypes(jsonObj['objects']);
  }
}



  function requestClasses(courseid) {

  // Request classes for mid panel
    var requestClassesURL = 'http://127.0.0.1:5000/api/classes?q={"filters":[{"name":"courses","op":"has","val":{"name":"id","op":"==","val":"' + courseid + '"}}],"order_by":[{"field": "dates__date", "direction": "asc"}]}';

    var requestClasses = new XMLHttpRequest();

    requestClasses.open('GET', requestClassesURL);

    requestClasses.responseType = 'json';

    requestClasses.send();

    requestClasses.onreadystatechange = function() {
      if(requestClasses.readyState == 4 && requestClasses.status == 200) {
        console.log("GotClasses");
      } else {
        console.log(requestClasses.readyState);
      }
    }

    requestClasses.onload = function() {
      var jsonObj = requestClasses.response;
      addClasses(jsonObj['objects']);
      //console.log(JSON.parse(JSON.stringify(jsonObj['objects'][0])));
    }
  }



  function requestRooms(courseid) {

  // Request rooms for left panel
    var requestRoomsURL = 'http://127.0.0.1:5000/api/rooms?q={"filters":[{"name":"classes","op":"any","val":{"name":"courses_id","op":"==","val":' + courseid + '}}]}';

    var requestRooms = new XMLHttpRequest();

    requestRooms.open('GET', requestRoomsURL);

    requestRooms.responseType = 'json';

    requestRooms.send();

    requestRooms.onreadystatechange = function() {
      if(requestRooms.readyState == 4 && requestRooms.status == 200) {
        console.log("GotRooms");
      } else {
        console.log(requestRooms.readyState);
      }
  }

    requestRooms.onload = function() {
      var jsonObj = requestRooms.response;
      addRooms(jsonObj['objects']);

    }
  }





	document.addEventListener("DOMContentLoaded", function() {
    requestCourses()
    requestClasses("48");
    requestExaminer("48");
    requestResponsible("48");
    requestTeachers("48");
    requestClasstypes("48");
    requestRooms("48");
    requestCourse("48");


  });




//ENDS HERE



</script>
</body>
</html>
