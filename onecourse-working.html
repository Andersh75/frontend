<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com -->
<!--  Last Published: Thu Aug 10 2017 15:58:54 GMT+0000 (UTC)  -->
<html data-wf-page="5905ee8fe6ee626e6c7169fc" data-wf-site="58ee511d22e1092ac39cacf7">
<head>
  <meta charset="utf-8">
  <title>One Course</title>
  <meta content="Teacher Backup" property="og:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/anderss-stunning-project.webflow.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({
  google: {
    families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic","Roboto:100,100italic,300,300italic,regular,italic,500,500italic,700,700italic,900,900italic","Source Sans Pro:200,200italic,300,300italic,regular,italic,600,600italic,700,700italic,900,900italic"]
  }
});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);
</script>
  <link href="https://daks2k3a4ib2z.cloudfront.net/img/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="https://daks2k3a4ib2z.cloudfront.net/img/webclip.png" rel="apple-touch-icon">
</head>
<body>
  <div class="_100vw">
    <div class="wrapper">
      <div class="wrapper__header">
        <div class="header-tesla">
          <div class="logo-tesla__box">
            <div class="text-block-13">RESURS</div>
          </div>
          <div class="menu-left-tesla">
            <div class="menu-left-tesla__item">KURSER</div>
            <div class="menu-left-tesla__item">LÄRARE</div>
            <div class="menu-left-tesla__item">SALAR</div>
            <div class="menu-left-tesla__item">PERIODER</div>
          </div>
          <div class="menu-right-tesla">
            <div class="menu-right-tesla__item">MITT SCHEMA</div>
            <div class="menu-right-tesla__item">MINA KURSER</div>
            <div class="menu-right-tesla__item">LOG OUT</div>
          </div>
        </div>
      </div>
      <div class="pagetitle-tesla__wrapper">
        <div class="margin__210--left"></div>
        <div class="pagetitle-tesla__box">
          <div class="titlebox-tesla">
            <div class="h-tesla-30-400-000000" id="courseNameHeadline">COURSE NAME</div>
          </div>
        </div>
        <div class="margin__210--right"></div>
      </div>
      <div class="table-tesla">
        <div class="margin__210--left"></div>
        <div class="table-tesla__container">
          <div class="schedule-tesla__right">
            <div class="table-tesla__searchblock">
              <div class="form-wrapper w-form">
                <form data-name="Email Form" id="email-form" name="email-form"><label class="field-label" for="resurs">COURSE</label><select class="select-field w-select" data-name="resurs" id="resurs" name="resurs"></select></form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>

            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">EXAMINER</label>
                  <div id="examinercheckboxes" class="table-tesla__checkbox__fieldbox">
                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>


            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">RESPONSIBLE</label>
                  <div id="responsiblecheckboxes" class="table-tesla__checkbox__fieldbox">
                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>




            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">TEACHER</label>
                  <div id="teacherscheckboxes" class="table-tesla__checkbox__fieldbox">


                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="teachers radio all" id="teachers-radio-all" name="teachers-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">All</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="teachers radio all" id="teachers-radio-none" name="teachers-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">None</label></div>
                      <div class="text-block-16" id="countF"></div>
                    </div>

                    <!--
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input checked="checked" class="w-checkbox-input" data-name="Checkbox E 2" id="checkbox-E-2" name="checkbox-E-2" type="checkbox"><label class="field-label-8 w-form-label" for="checkbox-E-2">Övning</label></div>
                      <div class="text-block-16" id="countE">233</div>
                    </div>
                    <div class="checkboxblock__entry">
                      <div class="w-checkbox w-clearfix"><input checked="checked" class="w-checkbox-input" data-name="Checkbox S 2" id="checkbox-S-2" name="checkbox-S-2" type="checkbox"><label class="field-label-8 w-form-label" for="checkbox-S-2">Seminarium</label></div>
                      <div class="text-block-16" id="countS">42</div>
                    </div>
                  -->
                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>


            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">KIND</label>
                  <div class="table-tesla__checkbox__fieldbox" id="classtypescheckboxes">





                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>



            <div class="table-tesla__checkboxblock">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">ROOM</label>
                  <div class="table-tesla__checkbox__fieldbox" id="roomscheckboxes">





                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>

          </div>
          <div class="schedule-tesla__left" id="schedule">
            <div class="table-tesla__table__headerbox">
              <div class="table-tesla__header__lablebox-period">
                <div class="table-tesla__header__cell__text">DATE</div>
              </div>
              <div class="table-tesla__header__lablebox-period">
                <div class="table-tesla__header__cell__text">TIME</div>
              </div>
              <div class="table-tesla__header__lablebox-period">
                <div class="table-tesla__header__cell__text">KIND</div>
              </div>
              <div class="table-tesla__header__lablebox--course">
                <div class="table-tesla__header__cell__text">TITLE</div>
              </div>
              <div class="table-tesla__table__header__lablebox-programandyear">
                <div class="table-tesla__header__cell__text">ROOM</div>
              </div>
              <div class="table-tesla__table__header__lablebox-programandyear">
                <div class="table-tesla__header__cell__text">TEACHER</div>
              </div>
            </div>
          </div>
          <div class="schedule-tesla__right">
            <div class="table-tesla__searchblock">
              <div class="form-wrapper w-form">
                <form data-name="Email Form" id="email-form" name="email-form"><input style="border-radius:3px; background-color:#3B99FC; margin-top:3px; padding:5px; color:white" class="signin-tesla__form__button--submit w-button field-label" data-wait="Please wait..." id="print-submit" type="button" value="PRINT">
                  </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>

            <div class="table-tesla__checkboxblock" id="availableteachersbox">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">TEACHERS</label>
                  <div id="availableteacherscheckboxes" class="table-tesla__checkbox__fieldbox">
                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>

            <div class="table-tesla__checkboxblock" id="availableroomsbox">
              <div class="form-wrapper-2 w-form">
                <form data-name="Email Form 2" id="email-form-2" name="email-form-2"><label class="field-label" for="name">ROOMS</label>
                  <div id="availableroomscheckboxes" class="table-tesla__checkbox__fieldbox">
                  </div>
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>




            <div class="table-tesla__searchblock">
              <div class="form-wrapper w-form">
                <form data-name="Email Form" id="email-form" name="email-form"><label class="field-label" for="Field-2">CONFLICT</label><select class="select-field w-select" data-name="Field" id="Field-2" name="Field"><option value="">TEACHER</option>
<option value="First">VT17</option>
<option value="Second">VT16</option>
<option value="Third">VT15</option></select><select class="select-field w-select" data-name="Field" id="krocktestkurs" name="Field"><option value="Kurs">COURSE</option>
<option value="AI1128">AI1128</option>
<option value="AI1148">AI1147</option>
<option value="AI1148">AI1148</option></select></form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>Oops! Something went wrong while submitting the form</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="margin__210--right"></div>
      </div>
    </div>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" type="text/javascript"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
  <script>




  function updateCurrentKindlist(kind, col) {

    var slotArray;
    var j;
    var slotKindIds;
    var slotKindIdArray;
    var availableKindsCheckboxForKindToAdd;
    var initials;
    var i;
    var div;
    var currentKindArray;
    var currentKindId;
    var kindIsCurrent;
    var k;
    var m;



    slotArray = document.getElementById('schedule').children;

    for (j = 1; j < slotArray.length; j++) {

      slotKindIds = slotArray[j].children[0].children[col].getAttribute("data-"+ kind + "classes");
      slotKindIdArray = slotKindIds.split(", ");


      if (slotKindIdArray != null) {
        for (k = 0; k < slotKindIdArray.length; k++) {
          if (slotKindIdArray[k] != 0) {
            if (document.querySelector("[data-"+ kind + "='" + slotKindIdArray[k] + "']") == null) {

              availableKindsCheckboxForKindToAdd = document.querySelector("[data-available"+ kind + "='" + slotKindIdArray[k] + "']");

              initials = availableKindsCheckboxForKindToAdd.nextSibling.nextSibling.textContent;

              div = document.createElement('div');
              div.className = "checkboxblock__entry";
              div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input ' + kind + '-checkboxes" data-' + kind + '="' + slotKindIdArray[k] + '" id="' + kind + '-checkbox-' + slotKindIdArray[k] + '" name="' + kind + '-checkbox-' + slotKindIdArray[k] + '" type="checkbox" checked>\
              <label class="field-label-8 w-form-label" for="' + kind + '-checkbox-' + slotKindIdArray[k] + '">' + initials + '</label></div>\
                <div class="text-block-16" id="countE"></div>';
              filterRadioChange(kind, div);
              document.getElementById(kind + 'checkboxes').appendChild(div);
            }
          }
        }
      }
    }


    currentKindArray = document.getElementById(kind + 'checkboxes').children;

    for (j = 2; j < currentKindArray.length; j++) {

      currentKindId = currentKindArray[j].children[0].children[0].getAttribute("data-" + kind);
      slotArray = document.getElementById('schedule').children;
      kindIsCurrent = false;

      for (k = 1; k < slotArray.length; k++) {

        slotKindIds = slotArray[k].children[0].children[col].getAttribute("data-" + kind + "classes");
        slotKindIdArray = slotKindIds.split(", ");


        if (slotKindIdArray != null) {
          for (m = 0; m < slotKindIdArray.length; m++) {
            if (slotKindIdArray[m] != 0) {
              if (slotKindIdArray[m] == currentKindId) {
                kindIsCurrent = true;
              }
            }
          }
        }
      }

      if (kindIsCurrent == false) {
        currentKindArray[j].remove();
      }
    }
  }



  function modAvailableKind(code) {
    var myNode;


    myNode = document.getElementById('availableTeachercheckboxes');
    //console.log("myNode: " + myNode.innerHTML);
    console.log(id);
    while (myNode.firstChild) {
      myNode.removeChild(myNode.firstChild);
    }
  }




  function addAvailableKind(code, kind, col) {
    var div;
    var i;
    var submitbutton;
    var availableKindsArray;


    for (i = 0; i < code.length; i++) {
      div = document.createElement('div');
      div.className = "checkboxblock__entry";

      if (kind == "teachers") {
        div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input available' + kind + '-checkboxes" data-available' + kind + '="' + code[i]['id'] + '" id="available' + kind + '-checkbox-' + code[i]['id'] + '" name="available' + kind + '-checkbox-' + code[i]['id'] + '" type="checkbox">\
        <label class="field-label-8 w-form-label" for="available' + kind + '-checkbox-' + code[i]['id'] + '">' + code[i]['firstname'] + ' ' + code[i]['lastname'] + '</label></div>\
          <div class="text-block-16" id="countE"></div>';
      } else {
        div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input available' + kind + '-checkboxes" data-available' + kind + '="' + code[i]['id'] + '" id="available' + kind + '-checkbox-' + code[i]['id'] + '" name="available' + kind + '-checkbox-' + code[i]['id'] + '" type="checkbox">\
        <label class="field-label-8 w-form-label" for="available' + kind + '-checkbox-' + code[i]['id'] + '">' + code[i]['name'] + '</label></div>\
          <div class="text-block-16" id="countE"></div>';
      }

      document.getElementById('available' + kind + 'checkboxes').appendChild(div);
    }

    availableKindsArray = document.getElementsByClassName("available" + kind + "-checkboxes");

    for (i = 0; i < availableKindsArray.length; i++) {
      availableKindsArray[i].checked = false;

      availableKindsArray[i].addEventListener("change", function() {
        var activeSlot;
        var activeSlotKindsInitials;
        var activeSlotKindInitialsArray;
        var activeSlotKindIds;
        var activeSlotKindIdArray;
        var thisAvailableKindIdMatchesActiveSlotKindId;
        var thisavailableKindId;
        var j;


        activeSlot = document.querySelector('[data-editclasses="true"]');

        activeSlotKindsInitials = activeSlot.children[0].children[col].textContent;
        activeSlotKindInitialsArray = activeSlotKindsInitials.split(", ");

        activeSlotKindIds = activeSlot.children[0].children[col].getAttribute("data-" + kind + "classes");
        console.log(activeSlotKindIds);
        activeSlotKindIdArray = activeSlotKindIds.split(", ");


        thisAvailableKindIdMatchesActiveSlotKindId = false;

        thisavailableKindId = this.getAttribute("data-available" + kind);


        //Remove unchecked activeSlotKind
        for (j = 0; j < activeSlotKindIdArray.length; j++) {
          if (activeSlotKindIdArray[j] == thisavailableKindId) {
            thisAvailableKindIdMatchesActiveSlotKindId = true;
            if (this.checked == false) {
              activeSlotKindIdArray.splice(j, 1);
              activeSlotKindInitialsArray.splice(j, 1);
            }
          }
        }


        //Add checked non existing activeSlotKind
        if (thisAvailableKindIdMatchesActiveSlotKindId == false) {
          if (this.checked == true) {
            activeSlotKindIdArray.push(thisavailableKindId);

            if (kind == "teachers") {
              thisAvailableKindInitials = this.parentElement.children[1].textContent.split(' ').map(function(item){return item[0]}).join('');
            } else {
              thisAvailableKindInitials = this.parentElement.children[1].textContent;
            }

            activeSlotKindInitialsArray.push(thisAvailableKindInitials);
          }
        }


        //Clean activeSlotKindArrays
        activeSlotKindIdArray = activeSlotKindIdArray.filter(Boolean);
        activeSlotKindInitialsArray = activeSlotKindInitialsArray.filter(Boolean);

        if (activeSlotKindInitialsArray.length > 1) {
          if (activeSlotKindInitialsArray[0] == "None" || activeSlotKindInitialsArray[0] == "nn") {
            activeSlotKindInitialsArray.splice(0, 1);
            activeSlotKindIdArray.splice(0, 1);
          }
        }




        activeSlotKindIds = "";
        activeSlotKindsInitials = "";

        for (j = 0; j < activeSlotKindIdArray.length; j++) {
          activeSlotKindIds = activeSlotKindIds + ", " + activeSlotKindIdArray[j];
          activeSlotKindsInitials = activeSlotKindsInitials + ", " + activeSlotKindInitialsArray[j];
        }

        if (activeSlotKindIds.charAt(0) == ",") {
          activeSlotKindIds = activeSlotKindIds.substring(2);
          activeSlotKindsInitials = activeSlotKindsInitials.substring(2);
        }

        if (activeSlotKindIds.charAt(0) == "0") {
          activeSlotKindIds = activeSlotKindIds.substring(3);
          activeSlotKindsInitials = activeSlotKindsInitials.substring(6);
        }

        if (activeSlotKindIds == "") {
          activeSlotKindsInitials = "None";
          activeSlotKindIds = 0;
        }


        activeSlot.children[0].children[col].textContent = activeSlotKindsInitials;

        if (kind == "teachers") {
          activeSlot.children[0].children[col].dataset.teachersclasses = activeSlotKindIds;
        } else {
          activeSlot.children[0].children[col].dataset.roomsclasses = activeSlotKindIds;
        }

        updateCurrentKindlist(kind, col);

      });
    }


    //Add submit button
    div = document.createElement('div');
    div.className = "checkboxblock__entry";
    div.innerHTML = '<input style="border-radius:3px; background-color:#3B99FC; margin-top:3px; padding:5px; color:white" class="signin-tesla__form__button--submit w-button field-label" data-wait="Please wait..." id="available' + kind + '-submit" type="button" value="SUBMIT">\
      <div class="text-block-16" id="countE"></div>';
    document.getElementById('available' + kind + 'checkboxes').appendChild(div);


    submitbutton = document.getElementById('available' + kind + '-submit');

    submitKindInSlot(submitbutton, kind, col);


    //Hide box
    document.getElementById('available' + kind + 'box').style.display = "none";
  }








  function addClasses(code) {
    var rooms;
    var roomsid;
    var i;
    var j;
    var teachers;
    var teachersid;
    var teachername;
    var coursecode;
    var div;
    var schedulerows;
    var data;
    var data = [];
    var id;

    id = "schedule";
    removeAllChildNodes(id);


    div = document.createElement('div');
    div.className = "table-tesla__table__headerbox";
    div.innerHTML = '<div class="table-tesla__header__lablebox-period">\
            <div class="table-tesla__header__cell__text">DATE</div>\
          </div>\
          <div class="table-tesla__header__lablebox-period">\
            <div class="table-tesla__header__cell__text">TIME</div>\
          </div>\
          <div class="table-tesla__header__lablebox-period">\
            <div class="table-tesla__header__cell__text">KIND</div>\
          </div>\
          <div class="table-tesla__header__lablebox--course">\
            <div class="table-tesla__header__cell__text">TITLE</div>\
          </div>\
          <div class="table-tesla__table__header__lablebox-programandyear">\
            <div class="table-tesla__header__cell__text">ROOM</div>\
          </div>\
          <div class="table-tesla__table__header__lablebox-programandyear">\
            <div class="table-tesla__header__cell__text">TEACHER</div>\
          </div>';
    document.getElementById('schedule').appendChild(div);


    for (i = 0; i < code.length; i++) {

      //ROOMS
      rooms = "";

      for (j = 0; j < code[i]['rooms'].length; j++) {
        rooms = rooms + ", " + code[i]['rooms'][j]['name'].substring(0,9)
      }

      // Erase beginning comma
      if (rooms.charAt(0) == ",") {
        rooms = rooms.substring(2);
      }

      //TEACHERS
      teachers = "";
      teachersid = "";

      for (j = 0; j < code[i]['teachers'].length; j++) {
        teachername = code[i]['teachers'][j]['firstname'] + " " + code[i]['teachers'][j]['lastname'];
        teachername = teachername.split(' ').map(function(item){return item[0]}).join('');
        teachers = teachers + ", " + teachername;
        teachersid = teachersid + ", " + code[i]['teachers'][j]['id'];
      }

      if (teachers.length < 1) {
        teachers = "None";
        teachersid = "0";
      }

      // Erase beginning comma
      if (teachers.charAt(0) == ",") {
        teachers = teachers.substring(2);
        teachersid = teachersid.substring(2);
      }


      //ROOMS
      rooms = "";
      roomsid = "";

      for (j = 0; j < code[i]['rooms'].length; j++) {
        rooms = rooms + ", " + code[i]['rooms'][j]['name'].substring(0,9)
        roomsid = roomsid + ", " + code[i]['rooms'][j]['id'];
      }

      if (rooms.length < 1) {
        rooms = "None";
        roomsid = "0";
      }

      // Erase beginning comma
      if (rooms.charAt(0) == ",") {
        rooms = rooms.substring(2);
        roomsid = roomsid.substring(2);
      }

      //CONTENT
      if (code[i]['content'] == null) {
        coursecode = "?";
      } else {
        coursecode = code[i]['content'];

      }

      // CREATE ROW ELEMENT
      div = document.createElement('div');
      div.className = "table-tesla__table__rowbox";
      div.dataset.classes = code[i]['id'];
      div.dataset.editclasses = "false";
      div.innerHTML = '<div class="table-tesla__table__row">\
          <div class="table-tesla__cell__text">' + code[i]['dates']['date'].substring(2, 4) + code[i]['dates']['date'].substring(5, 7) + code[i]['dates']['date'].substring(8, 10) + '</div>\
          <div class="table-tesla__cell__text">'+ code[i]['starttime'] + '-' + code[i]['endtime'] + '</div>\
          <div class="table-tesla__cell__text" data-classtypesclasses="' + code[i]['classtypes']['id'] + '">' + code[i]['classtypes']['classtype'].charAt(0) + '</div>\
          <div class="table-tesla__cell__text--bold" contenteditable="true">' + coursecode + '</div>\
          <div class="table-tesla__cell__text" data-roomsclasses="' + roomsid + '">' + rooms + '</div>\
          <div class="table-tesla__cell__text" data-teachersclasses="' + teachersid + '">' + teachers + '</div>\
        </div>';
      document.getElementById('schedule').appendChild(div);
    }



    schedulerows = document.getElementsByClassName('table-tesla__table__rowbox');

    for (i = 0; i < schedulerows.length; i++) {


      slotEventListeners(5, "teachers", schedulerows[i]);
      slotEventListeners(4, "rooms", schedulerows[i]);

      schedulerows[i].children[0].children[3].addEventListener('click', function (event) {
        if (document.querySelector('[data-editclasses="true"]') !== null) {
          submitAllSelectedFromSlot(4, "rooms");
          submitAllSelectedFromSlot(5, "teachers");
          document.querySelector('[data-editclasses="true"]').style.backgroundColor = "rgba(255, 255, 255)";
          document.querySelector('[data-editclasses="true"]').dataset.editclasses = false;
        }
        event.target.style.outline = "0px solid transparent";
        event.target.parentElement.parentElement.dataset.editclasses = true;
        event.target.parentElement.parentElement.style.backgroundColor = "rgba(59, 153, 252, 0.1)";
      });




      //ADD EVENTLISTENER FOR CONTENT
      schedulerows[i].addEventListener('keydown', function (event) {


        var esc = event.which == 27,
            nl = event.which == 13,
            el = event.target,
            input = el.nodeName != 'INPUT' && el.nodeName != 'TEXTAREA',
            data = {},
            requestClassesURL,
            requestClasses,
            classid;

        var self = this;



        function foo() {
          var data = {};
          var requestClassesURL;
          var requestClasses;
          var classid;

          //console.log(this);
          //console.log(this.children[0].children[3].innerHTML);
          //console.log(this.getAttribute("data-classes"));

          data['content'] = this.children[0].children[3].innerHTML;

          classid = this.getAttribute("data-classes");


          requestClassesURL = 'http://127.0.0.1:5000/api/classes/' + classid;

          requestClasses = new XMLHttpRequest();

          requestClasses.open('PUT', requestClassesURL, true);

          requestClasses.setRequestHeader("Content-type", "application/json");

          requestClasses.send(JSON.stringify(data));
          this.children[0].children[3].blur();
          //event.preventDefault();

          requestClasses.onreadystatechange = function() {
            if(requestClasses.readyState == 4 && requestClasses.status == 200) {
              //console.log("SentContent");
            } else {
              //console.log(requestClasses.readyState);
            }
          }

          if(this.getAttribute('data-classes') != document.querySelector('[data-editclasses="true"]').getAttribute('data-classes')) {
            this.style.backgroundColor = "rgba(255, 255, 255)";
            this.dataset.editclasses = false;
          }




        }





        document.addEventListener("click", function handler(e) {
          foo.call(self);

          //OM KLICKET VAR INOM EN SCHEMARAD - AKTIVERA RADEN

          //console.log("CLICK");



          e.currentTarget.removeEventListener(e.type, handler);

        }, false);



        if (input) {


          if (esc) {
            document.execCommand('undo');
            el.blur();
          } else if (nl) {
            //console.log("fire")

            data['content'] = el.innerHTML;

            //console.log(el.innerHTML);

            //console.log(event.currentTarget.getAttribute("data-classes"));

            classid = event.currentTarget.getAttribute("data-classes");


            requestClassesURL = 'http://127.0.0.1:5000/api/classes/' + classid;

            requestClasses = new XMLHttpRequest();

            requestClasses.open('PUT', requestClassesURL, true);

            requestClasses.setRequestHeader("Content-type", "application/json");

            requestClasses.send(JSON.stringify(data));
            el.blur();
            event.preventDefault();

            requestClasses.onreadystatechange = function() {
              if(requestClasses.readyState == 4 && requestClasses.status == 200) {
                //console.log("SentContent");
              } else {
                //console.log(requestClasses.readyState);
              }
            }

            el.parentElement.parentElement.style.backgroundColor = "rgba(255, 255, 255)";
            el.parentElement.parentElement.dataset.editclasses = false;


          }
        }
      }, true);
    }
  }

  function slotEventListeners(col, kind, node) {
    //ADD EVENTLISTENER FOR ROOMS - var kind; var s;
    node.children[0].children[col].addEventListener('click', function (event) {

      var schedulelines;
      var m;
      var availableboxes = [];
      var slotToCheckForActiveKindIds;
      var slotToCheckForActiveKindIdArray = [];


      if (document.querySelector('[data-editclasses="true"]') !== null) {

        submitAllSelectedFromSlot(4, "rooms");
        submitAllSelectedFromSlot(5, "teachers");


        //document.getElementById('availablekindsbox').style.display = "none";
        if(event.target.parentElement.parentElement.getAttribute('data-classes') != document.querySelector('[data-editclasses="true"]').getAttribute('data-classes')) {
          console.log(event.target.parentElement.parentElement.getAttribute('data-classes'));
          console.log(document.querySelector('[data-editclasses="true"]').getAttribute('data-classes'));
          document.querySelector('[data-editclasses="true"]').style.backgroundColor = "rgba(255, 255, 255)";
          document.querySelector('[data-editclasses="true"]').dataset.editclasses = false;
        }

      }

      schedulelines = document.getElementsByClassName('table-tesla__table__rowbox');


      event.target.parentElement.parentElement.dataset.editclasses = true;
      event.target.parentElement.parentElement.style.backgroundColor = "rgba(59, 153, 252, 0.1)";
      //event.preventDefault();

      document.getElementById('available' + kind + 'box').style.display = "";

      availableboxes = document.getElementsByClassName('available' + kind + '-checkboxes');

      slotToCheckForActiveKindIds = event.target.getAttribute('data-' + kind + 'classes');

      slotToCheckForActiveKindIdArray = slotToCheckForActiveKindIds.split(", ");


      for (k = 0; k < availableboxes.length; k++) {
        availableboxes[k].checked = false;
      }

      for (j = 0; j < slotToCheckForActiveKindIdArray.length; j++) {
        for (k = 0; k < availableboxes.length; k++) {
          if (availableboxes[k].getAttribute('data-available' + kind) == slotToCheckForActiveKindIdArray[j]) {
            availableboxes[k].checked = true;
          }
        }
      }


      //event.target.parentElement.parentElement.dataset.editclasses = true;
      //event.target.parentElement.parentElement.style.backgroundColor = "rgba(59, 153, 252, 0.1)";

    }, true);




  }


  function submitAllSelectedFromSlot(col, kind) {

    var classid;
    var kindsToPatch = {};
    var slotToSubmit;
    var kindIdToPatch;
    var slotToSubmitKindIds;
    var slotToSubmitKindIdArray;
    var i;


    slotToSubmit = document.querySelector('[data-editclasses="true"]');
    slotToSubmitKindIds = slotToSubmit.children[0].children[col].getAttribute("data-" + kind + "classes");
    slotToSubmitKindIdArray = slotToSubmitKindIds.split(", ");
    console.log("slotToSubmitKindIdArray" + slotToSubmitKindIdArray);

    kindsToPatch[kind] = [];

    for (i = 0; i < slotToSubmitKindIdArray.length; i++) {
      kindIdToPatch = {};

      if (slotToSubmitKindIdArray[i] != 0 && slotToSubmitKindIdArray[i] != null) {
        kindIdToPatch['id'] = slotToSubmitKindIdArray[i];
        kindsToPatch[kind].push(kindIdToPatch);
      }
    }

    classid = slotToSubmit.getAttribute("data-classes");


    patchKind(classid, kindsToPatch, kind);
    document.getElementById('available' + kind + 'box').style.display = "none";
  }




  function addClasstypes(code) {
    var div;
    var i;
    var checkboxlist = [];
    var classtypesRadioAll;
    var classtypesRadioNone;
    var id;

    id = "classtypescheckboxes";
    removeAllChildNodes(id);


    div = document.createElement('div');
    div.className = "checkboxblock__entry";
    div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="classtypes radio all" id="classtypes-radio-all" name="classtypes-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Alla</label></div>\
    <div class="text-block-16" id="countF"></div>';
    document.getElementById('classtypescheckboxes').appendChild(div);


    div = document.createElement('div');
    div.className = "checkboxblock__entry";
    div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="classtypes radio all" id="classtypes-radio-none" name="classtypes-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">Ingen</label></div>\
    <div class="text-block-16" id="countF"></div>';
    document.getElementById('classtypescheckboxes').appendChild(div);


    for (i = 0; i < code.length; i++) {
      div = document.createElement('div');
      div.className = "checkboxblock__entry";
      div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input classtypes-checkboxes" data-classtypes="' + code[i]['id'] + '" id="classtypes-checkbox-' + code[i]['id'] + '" type="checkbox"><label class="field-label-8 w-form-label">' + code[i]['classtype'] + '</label></div>\
        <div class="text-block-16"></div>';
      document.getElementById('classtypescheckboxes').appendChild(div);
    }


    checkboxlist = document.getElementsByClassName("classtypes-checkboxes");

    for (i = 0; i < checkboxlist.length; i++) {
      checkboxlist[i].checked = true;
      filterRadioChange("classtypes", checkboxlist[i]);
    }


    classtypesRadioAll = document.getElementById('classtypes-radio-all');
    classtypesRadioNone = document.getElementById('classtypes-radio-none');

    filterRadioChangeEffectOnCheckboxes("classtypes", classtypesRadioAll, true);
    filterRadioChangeEffectOnCheckboxes("classtypes", classtypesRadioNone, false);

  }



  function addResponsible(code) {
    var div;
    var i;
    var id;

    id = "responsiblecheckboxes";
    removeAllChildNodes(id);


    for (i = 0; i < code.length; i++) {
      div = document.createElement('div');
      div.className = "checkboxblock__entry";
      div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input responsible-checkboxes" data-responsible="' + code[i]['id'] + '" id="responsible-checkbox-' + code[i]['id'] + '" name="responsible-checkbox-' + code[i]['id'] + '" type="checkbox" disabled checked>\
      <label class="field-label-8 w-form-label" for="responsible-checkbox-' + code[i]['id'] + '">' + code[i]['firstname'] + ' ' + code[i]['lastname'] + '</label></div>\
        <div class="text-block-16" id="countE"></div>';
      document.getElementById('responsiblecheckboxes').appendChild(div);
    }

  }


  function addTeachers(code) {
    var div;
    var i;
    var checkboxlist = [];
    var teachersRadioAll;
    var teachersRadioNone;
    var id;

    id = "teacherscheckboxes";
    removeAllChildNodes(id);


    div = document.createElement('div');
    div.className = "checkboxblock__entry";
    div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="teachers radio all" id="teachers-radio-all" name="teachers-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">All</label></div>\
                          <div class="text-block-16" id="countF"></div>';
    document.getElementById('teacherscheckboxes').appendChild(div);


    div = document.createElement('div');
    div.className = "checkboxblock__entry";
    div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="teachers radio all" id="teachers-radio-none" name="teachers-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">None</label></div>\
    <div class="text-block-16" id="countF"></div>';
    document.getElementById('teacherscheckboxes').appendChild(div);


    for (i = 0; i < code.length; i++) {
      div = document.createElement('div');
      div.className = "checkboxblock__entry";
      div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input teachers-checkboxes" data-teachers="' + code[i]['id'] + '" id="teachers-checkbox-' + code[i]['id'] + '" name="teachers-checkbox-' + code[i]['id'] + '" type="checkbox">\
      <label class="field-label-8 w-form-label" for="teachers-checkbox-' + code[i]['id'] + '">' + code[i]['firstname'] + ' ' + code[i]['lastname'] + '</label></div>\
        <div class="text-block-16" id="countE"></div>';
      document.getElementById('teacherscheckboxes').appendChild(div);
    }


    checkboxlist = document.getElementsByClassName("teachers-checkboxes");

    teachersRadioAll = document.getElementById('teachers-radio-all');
    teachersRadioNone = document.getElementById('teachers-radio-none');

    teachersRadioAll.checked = false;
    teachersRadioNone.checked = false;

    for (i = 0; i < checkboxlist.length; i++) {
      checkboxlist[i].checked = true;
      filterRadioChange("teachers", checkboxlist[i]);
    }

    filterRadioChangeEffectOnCheckboxes("teachers", teachersRadioAll, true);
    filterRadioChangeEffectOnCheckboxes("teachers", teachersRadioNone, false);
  }




  function addRooms(code) {
    var div;
    var i;
    var id;
    var checkboxlist = [];
    var roomsRadioAll;
    var roomsRadioNone;


    id = "roomscheckboxes";
    removeAllChildNodes(id);


    div = document.createElement('div');
    div.className = "checkboxblock__entry";
    div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="rooms radio all" id="rooms-radio-all" name="rooms-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">All</label></div>\
    <div class="text-block-16" id="countF"></div>';
    document.getElementById('roomscheckboxes').appendChild(div);


    div = document.createElement('div');
    div.className = "checkboxblock__entry";
    div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="checkbox-2 w-checkbox-input" data-name="rooms radio all" id="rooms-radio-none" name="rooms-radio-all" type="radio"><label class="field-label-8 w-form-label" for="checkbox-F-2">None</label></div>\
    <div class="text-block-16" id="countF"></div>';
    document.getElementById('roomscheckboxes').appendChild(div);


    for (i = 0; i < code.length; i++) {
      div = document.createElement('div');
      div.className = "checkboxblock__entry";
      div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input rooms-checkboxes" data-rooms="' + code[i]['id'] + '" id="rooms-checkbox-' + code[i]['id'] + '" name="rooms-checkbox-' + code[i]['id'] + '" type="checkbox">\
      <label class="field-label-8 w-form-label" for="rooms-checkbox-' + code[i]['id'] + '">' + code[i]['name'] + '</label></div>\
        <div class="text-block-16" id="countE"></div>';
      document.getElementById('roomscheckboxes').appendChild(div);
    }


    checkboxlist = document.getElementsByClassName("rooms-checkboxes");
    roomsRadioAll = document.getElementById('rooms-radio-all');
    roomsRadioNone = document.getElementById('rooms-radio-none');

    for (i = 0; i < checkboxlist.length; i++) {
      checkboxlist[i].checked = true;
      filterRadioChange("rooms", checkboxlist[i]);
    }


    filterRadioChangeEffectOnCheckboxes("rooms", roomsRadioAll, true);
    filterRadioChangeEffectOnCheckboxes("rooms", roomsRadioNone, false);
  }



  function addExaminer(code) {
    var div;
    var i;
    var id;

    id = "examinercheckboxes";
    removeAllChildNodes(id);


    for (i = 0; i < code.length; i++) {
      div = document.createElement('div');
      div.className = "checkboxblock__entry";
      div.innerHTML = '<div class="w-checkbox w-clearfix"><input class="w-checkbox-input examiner-checkboxes" data-examiner="' + code[i]['id'] + '" id="examiner-checkbox-' + code[i]['id'] + '" name="examiner-checkbox-' + code[i]['id'] + '" type="checkbox" disabled checked>\
      <label class="field-label-8 w-form-label" for="examiner-checkbox-' + code[i]['id'] + '">' + code[i]['firstname'] + ' ' + code[i]['lastname'] + '</label></div>\
        <div class="text-block-16" id="countE"></div>';
      document.getElementById('examinercheckboxes').appendChild(div);
    }

  }



  function addCourseToTitle(code) {
    document.getElementById('courseNameHeadline').textContent = code[0]['code'] + " " + code[0]['name'];
  }



  function addCoursesToSelect(code) {
    var option;
    var i;
    var codeSelector;


    for (i = 0; i < code.length; i++) {
      option = document.createElement('option');
      option.value = code[i]['id'];
      option.innerHTML = code[i]['code'] + " " + code[i]['name'];
      document.getElementById('resurs').appendChild(option);
    }


    codeSelector = document.getElementById('resurs');

    codeSelector.addEventListener('change', function() {
      customApiRequest(this.value, "classes");
      customApiRequest(this.value, "examiner");
      customApiRequest(this.value, "responsible");
      customApiRequest(this.value, "teachers");
      customApiRequest(this.value, "classtypes");
      customApiRequest(this.value, "rooms");
      customApiRequest(this.value, "course");
      //customApiRequest("periodone", "allClassesInPeriod");
      scanner();
    }, false);
  }


  function patchKind(classid, data, kind) {

    var requestTeachersURL;
    var requestTeachers;

    requestTeachersURL = 'http://127.0.0.1:5000/api/classes/' + classid + '/' + kind;
    requestTeachers = new XMLHttpRequest();
    requestTeachers.open('PATCH', requestTeachersURL, true);
    requestTeachers.setRequestHeader("Content-type", "application/json");
    requestTeachers.send(JSON.stringify(data));
    requestTeachers.onreadystatechange = function() {
        if(requestTeachers.readyState == 4 && requestTeachers.status == 200) {
          console.log("SentKind:" + kind);
        } else {
          console.log(requestTeachers.readyState);
        }
    }
  }


  function submitKindInSlot(submitbutton, kind, col) {
    submitbutton.addEventListener("click", function(event) {

      var slotToSubmit;
      var slotToSubmitKindIds;
      var slotToSubmitKindIdArray;
      var kindsToPatch = {};
      var i;
      var classid;


      slotToSubmit = document.querySelector('[data-editclasses="true"]');
      slotToSubmitKindIds =slotToSubmit.children[0].children[col].getAttribute("data-" + kind + "classes");
      slotToSubmitKindIdArray = slotToSubmitKindIds.split(", ");

      kindsToPatch[kind] = [];

      for (i = 0; i < slotToSubmitKindIdArray.length; i++) {
        kindIdToPatch = {};

        if (slotToSubmitKindIdArray[i] != 0 && slotToSubmitKindIdArray[i] != null) {
          kindIdToPatch['id'] = slotToSubmitKindIdArray[i];
          kindsToPatch[kind].push(kindIdToPatch);
        }
      }

      classid = slotToSubmit.getAttribute("data-classes");

      patchKind(classid, kindsToPatch, kind);

      document.getElementById('available' + kind + 'box').style.display = "none";
      document.querySelector('[data-editclasses="true"]').style.backgroundColor = "rgba(255, 255, 255)";
      document.querySelector('[data-editclasses="true"]').dataset.editclasses = false;
      event.preventDefault();
    });

  }





  function filterRadioChangeEffectOnCheckboxes(kind, node, allOrNone) {
    node.addEventListener("change", function() {
      var i;
      var checkboxlist = [];

      checkboxlist = document.getElementsByClassName(kind + "-checkboxes");

      for (i = 0; i < checkboxlist.length; i++) {
        checkboxlist[i].checked = allOrNone;
      }
      filterSchedule()
    });
  }


  function filterRadioChange(kind, node) {
    node.addEventListener("change", function() {
      var RadioAll;
      var RadioNone;

      RadioAll = document.getElementById(kind + '-radio-all');
      RadioNone = document.getElementById(kind + '-radio-none');

      RadioAll.checked = false;
      RadioNone.checked = false;

      filterSchedule();
    });
  }


  function filterSchedule() {
    schedulelist = document.getElementById('schedule').children;

    for (j = 1; j < schedulelist.length; j++) {

      //var roomsvar = document.querySelector("[data-rooms='" + schedulelist[j].children[0].children[4].getAttribute("data-roomsclasses") + "']");
      var classtypesvar = document.querySelector("[data-classtypes='" + schedulelist[j].children[0].children[2].getAttribute("data-classtypesclasses") + "']");

      var myteachers = schedulelist[j].children[0].children[5].getAttribute("data-teachersclasses");
      var slotToSubmitTeacherInitialsArray = myteachers.split(", ");

      //console.log(slotToSubmitTeacherInitialsArray);

      var k;
      var teachersvar = false;


      if (slotToSubmitTeacherInitialsArray == null) {
        ////console.log("empty array");
      }

      for (k = 0; k < slotToSubmitTeacherInitialsArray.length; k++) {
        ////console.log(slotToSubmitTeacherInitialsArray[k]);
        if (document.querySelector("[data-teachers='" + slotToSubmitTeacherInitialsArray[k] + "']") != null) {
          if (document.querySelector("[data-teachers='" + slotToSubmitTeacherInitialsArray[k] + "']").checked == true) {
            teachersvar = true;
          }
        } else {
          teachersvar = true;
        }

      }

      ////console.log(teachersvar);



      var myrooms = schedulelist[j].children[0].children[4].getAttribute("data-roomsclasses");
      var myroomsarray = myrooms.split(", ");


      var roomsvar = false;



      for (k = 0; k < myroomsarray.length; k++) {
        ////console.log(slotToSubmitTeacherInitialsArray[k]);
        if (document.querySelector("[data-rooms='" + myroomsarray[k] + "']") != null) {
          if (document.querySelector("[data-rooms='" + myroomsarray[k] + "']").checked == true) {
            roomsvar = true;
          }
        } else {
          roomsvar = true;
        }
      }

      //if (classtypesvar.checked == false || coursesvar.checked == false || roomsvar.checked == false) {
      if (classtypesvar.checked == false || roomsvar == false || teachersvar == false) {
        schedulelist[j].style.display = "none";
      } else {
        schedulelist[j].style.display = "";
      }
    }
  }


/* SET TITLE */


  function addAllClassesInPeriod(data) {
    console.log(JSON.stringify(data[0]));
  }


/* ALL INITIAL REQUESTS */


  function customApiRequest(courseid, kind) {
    var requestURL;
    var request;

    switch(kind) {
      case "examiner":
          requestURL = 'http://127.0.0.1:5000/api/teachers?q={"filters":[{"name":"examiner","op":"any","val":{"name":"id","op":"==","val":"' + courseid + '"}}]}';
          break;
      case "availableteachers":
          requestURL = 'http://127.0.0.1:5000/api/teachers?q={"filters":[{"name":"firstname","op":"is_not_null","val":"yes"}],"order_by":[{"field": "firstname", "direction": "asc"}]}';
          break;
      case "availablerooms":
          requestURL = 'http://127.0.0.1:5000/api/rooms?q={"filters":[{"name":"name","op":"is_not_null","val":"yes"}],"order_by":[{"field": "name", "direction": "asc"}]}';
          break;
      case "courses":
          requestURL = 'http://127.0.0.1:5000/api/courses?q={"filters":[{"name":"examiner_id","op":"ge","val":1}],"order_by":[{"field": "code", "direction": "asc"}]}';
          break;
      case "responsible":
          requestURL = 'http://127.0.0.1:5000/api/teachers?q={"filters":[{"name":"responsible","op":"any","val":{"name":"id","op":"==","val":"' + courseid + '"}}]}';
          break;
      case "teachers":
          requestURL = 'http://127.0.0.1:5000/api/teachers?q={"filters":[{"name":"classes","op":"any","val":{"name":"courses_id","op":"eq","val":' + courseid + '}}]}';
          break;
      case "availableTeachers":
          requestURL = 'http://127.0.0.1:5000/api/teachers?q={"filters":[{"name":"firstname","op":"is_not_null","val":"yes"}],"order_by":[{"field": "firstname", "direction": "asc"}]}';
          break;
      case "course":
          requestURL = 'http://127.0.0.1:5000/api/courses?q={"filters":[{"name":"id","op":"==","val":' + courseid + '}]}';
          break;
      case "classtypes":
          requestURL = 'http://127.0.0.1:5000/api/classtypes?q={"filters":[{"name":"classes","op":"any","val":{"name":"courses_id","op":"==","val":' + courseid + '}}]}';
          break;
      case "classes":
          requestURL = 'http://127.0.0.1:5000/api/classes?q={"filters":[{"name":"courses","op":"has","val":{"name":"id","op":"==","val":"' + courseid + '"}}],"order_by":[{"field": "dates__date", "direction": "asc"}]}';
          break;
      case "rooms":
          requestURL = 'http://127.0.0.1:5000/api/rooms?q={"filters":[{"name":"classes","op":"any","val":{"name":"courses_id","op":"==","val":' + courseid + '}}]}';
          break;
      case "allClassesInPeriod":
          requestURL = 'http://127.0.0.1:5000/api/classes?q={"filters":[{"name":"courses","op":"has","val":{"name":"periodone","op":"==","val":"1"}}], "order_by":[{"field": "dates__date", "direction": "asc"}, {"field": "starttime", "direction": "asc"}]}';
          break;


    }

    request = new XMLHttpRequest();

    request.open('GET', requestURL);

    request.responseType = 'json';

    request.send();

    request.onreadystatechange = function() {
        if(request.readyState == 4 && request.status == 200) {
          //console.log("GotExaminer");
        } else {
          //console.log(requestExaminer.readyState);
        }
    }

    request.onload = function() {
      var jsonObj = request.response;

      switch(kind) {
        case "examiner":
            addExaminer(jsonObj['objects']);
            break;
        case "availableteachers":
            addAvailableKind(jsonObj['objects'], "teachers", 5);
            break;
        case "availablerooms":
            addAvailableKind(jsonObj['objects'], "rooms", 4);
            break;
        case "courses":
            addCoursesToSelect(jsonObj['objects']);
            break;
        case "responsible":
            addResponsible(jsonObj['objects']);
            break;
        case "teachers":
            addTeachers(jsonObj['objects']);
            break;
        case "course":
            addCourseToTitle(jsonObj['objects']);
            break;
        case "classtypes":
            addClasstypes(jsonObj['objects']);
            break;
        case "classes":
            addClasses(jsonObj['objects']);
            break;
        case "rooms":
            addRooms(jsonObj['objects']);
            break;
        case "allClassesInPeriod":
            modAvailableKind(jsonObj['objects']);
            break;

      }

    }

  }




  function removeAllChildNodes(id) {
    var myNode;


    myNode = document.getElementById(id);
    //console.log("myNode: " + myNode.innerHTML);
    console.log(id);
    while (myNode.firstChild) {
      myNode.removeChild(myNode.firstChild);
    }
  }


  function scanner(code) {
    var i;
    var data;
    var col;


    data = {};
    col = code.children[0].children;

    data['date'] = col[0].innerHTML;
    data['time'] = col[1].innerHTML;
    data['kind'] = col[2].innerHTML;
    data['title'] = col[3].innerHTML;
    data['rooms'] = col[4].innerHTML;
    data['teachers'] = col[5].innerHTML;

    return data;

  }



function printing(objArray) {
    var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;

    var str = '';

    for (var i = 0; i < array.length; i++) {
        var line = '';

        for (var index in array[i]) {
            line += array[i][index] + ';';
        }

        line.slice(0,line.Length-1);

        str += line + '\r\n';
    }
    window.open( "data:text/csv;charset=utf-8," + escape(str))
}


	document.addEventListener("DOMContentLoaded", function() {
    customApiRequest("none", "courses");
    customApiRequest("none", "availableteachers");
    customApiRequest("none", "availablerooms");
    customApiRequest("48", "classes");
    customApiRequest("48", "examiner");
    customApiRequest("48", "responsible");
    customApiRequest("48", "teachers");
    customApiRequest("48", "classtypes");
    customApiRequest("48", "rooms");
    customApiRequest("48", "course");
    //customApiRequest("periodone", "allClassesInPeriod");



    document.getElementById("print-submit").addEventListener('click', function (event) {

      var schedule;
      var data;
      var i;
      var dataarray = [];

      schedule = document.getElementById('schedule');

      for (i = 1; i < schedule.children.length; i++) {
        data = scanner(schedule.children[i]);
        dataarray.push(data);
      }

      printing(dataarray);
    });
  });




//ENDS HERE



</script>
</body>
</html>
